!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SirTrevor=e():t.SirTrevor=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,i){r.apply(this,[t,e,i].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";t.exports=n(1),n(280)},function(t,e,n){"use strict";var r=n(2)["default"];n(17),n(18).shim(),n(21),n(22),n(23).polyfill();var i=n(29),o={config:n(68),log:i.log,Locales:n(72),Events:n(73),EventBus:n(75),EditorStore:n(76),Submittable:n(77),FileUploader:n(78),BlockMixins:n(128),BlockPositioner:n(234),BlockReorder:n(237),BlockDeletion:n(238),BlockValidations:n(239),BlockStore:n(240),BlockManager:n(241),SimpleBlock:n(245),Block:n(244),Blocks:n(242),FormatBar:n(269),Editor:n(271),toMarkdown:n(279),toHTML:n(253),setDefaults:function(t){r(o.config.defaults,t||{})},getInstance:i.getInstance,setBlockOptions:function(t,e){var n=o.Blocks[t];"undefined"!=typeof n&&r(n.prototype,e||{})},runOnAllInstances:function(t){if(o.Editor.prototype.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(o.config.instances,function(n){n[t].apply(null,e)})}else o.log("method doesn't exist")}};r(o,n(272)),t.exports=o},function(t,e,n){t.exports={"default":n(3),__esModule:!0}},function(t,e,n){n(4),t.exports=n(7).Object.assign},function(t,e,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(10)})},function(t,e,n){var r=n(6),i=n(7),o=n(8),s="prototype",a=function(t,e,n){var u,c,l,f=t&a.F,h=t&a.G,p=t&a.S,d=t&a.P,v=t&a.B,m=t&a.W,g=h?i:i[e]||(i[e]={}),y=h?r:p?r[e]:(r[e]||{})[s];h&&(n=e);for(u in n)c=!f&&y&&u in y,c&&u in g||(l=c?y[u]:n[u],g[u]=h&&"function"!=typeof y[u]?n[u]:v&&c?o(l,r):m&&y[u]==l?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((g[s]||(g[s]={}))[u]=l))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(9);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(11),i=n(12),o=n(14);t.exports=n(16)(function(){var t=Object.assign,e={},n={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach(function(t){n[t]=t}),7!=t({},e)[r]||Object.keys(t({},n)).join("")!=i})?function(t,e){for(var n=i(t),s=arguments,a=s.length,u=1,c=r.getKeys,l=r.getSymbols,f=r.isEnum;a>u;)for(var h,p=o(s[u++]),d=l?c(p).concat(l(p)):c(p),v=d.length,m=0;v>m;)f.call(p,h=d[m++])&&(n[h]=p[h]);return n}:Object.assign},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){var r=n(13);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(15);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){},function(t,e,n){"use strict";var r=n(19),i=function(t){return"undefined"!=typeof t&&null!==t},o=function(t,e){if(!i(t))throw new TypeError("target must be an object");var n,o,s,a,u=Object(t);for(n=1;n<arguments.length;++n)for(o=Object(arguments[n]),a=r(o),s=0;s<a.length;++s)u[a[s]]=o[a[s]];return u};o.shim=function(){return Object.assign||(Object.assign=o),Object.assign||o},t.exports=o},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,s=n(20),a=!{toString:null}.propertyIsEnumerable("toString"),u=function(){}.propertyIsEnumerable("prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(t){var e=t.constructor;return e&&e.prototype===t},f={$console:!0,$frame:!0,$frameElement:!0,$frames:!0,$parent:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{l(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),p=function(t){if("undefined"==typeof window||!h)return l(t);try{return l(t)}catch(e){return!1}},d=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),o=s(t),l=e&&"[object String]"===i.call(t),f=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var h=u&&n;if(l&&t.length>0&&!r.call(t,0))for(var d=0;d<t.length;++d)f.push(String(d));if(o&&t.length>0)for(var v=0;v<t.length;++v)f.push(String(v));else for(var m in t)h&&"prototype"===m||!r.call(t,m)||f.push(String(m));if(a)for(var g=p(t),y=0;y<c.length;++y)g&&"constructor"===c[y]||!r.call(t,c[y])||f.push(c[y]);return f};d.shim=function(){if(Object.keys){var t=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!t){var e=Object.keys;Object.keys=function(t){return e(s(t)?o.call(t):t)}}}else Object.keys=d;return Object.keys||d},t.exports=d},function(t,e){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},function(t,e){!function(t){if(!Array.prototype.find){var e=function(t){var e=Object(this),n=e.length<0?0:e.length>>>0;if(0===n)return void 0;if("function"!=typeof t||"[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Array#find: predicate must be a function");for(var r,i=arguments[1],o=0;n>o;o++)if(r=e[o],t.call(i,r,o,e))return r;return void 0};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:e,configurable:!0,enumerable:!1,writable:!0})}catch(n){}Array.prototype.find||(Array.prototype.find=e)}}(this)},function(t,e){"use strict";Array.prototype.includes||(Array.prototype.includes=function(t){var e=Object(this),n=parseInt(e.length)||0;if(0===n)return!1;var r,i=parseInt(arguments[1])||0;i>=0?r=i:(r=n+i,0>r&&(r=0));for(var o;n>r;){if(o=e[r],t===o||t!==t&&o!==o)return!0;r++}return!1})},function(t,e,n){var r;(function(t,i,o,s){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   2.3.0
	 */
(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){Q=t}function f(t){Y=t}function h(){var e=t.nextTick,n=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(e=i),function(){e(g)}}function p(){return function(){V(g)}}function d(){var t=0,e=new et(g),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function v(){var t=new MessageChannel;return t.port1.onmessage=g,function(){t.port2.postMessage(0)}}function m(){return function(){setTimeout(g,1)}}function g(){for(var t=0;X>t;t+=2){var e=it[t],n=it[t+1];e(n),it[t]=void 0,it[t+1]=void 0}X=0}function y(){try{var t=n(27);return V=t.runOnLoop||t.runOnContext,p()}catch(e){return m()}}function _(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function k(){return new TypeError("A promises callback cannot return that same promise.")}function w(t){try{return t.then}catch(e){return ut.error=e,ut}}function x(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function E(t,e,n){Y(function(t){var r=!1,i=x(n,e,function(n){r||(r=!0,e!==n?C(t,n):A(t,n))},function(e){r||(r=!0,L(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,L(t,i))},t)}function S(t,e){e._state===st?A(t,e._result):e._state===at?L(t,e._result):M(e,void 0,function(e){C(t,e)},function(e){L(t,e)})}function T(t,e){if(e.constructor===t.constructor)S(t,e);else{var n=w(e);n===ut?L(t,ut.error):void 0===n?A(t,e):u(n)?E(t,e,n):A(t,e)}}function C(t,e){t===e?L(t,b()):a(e)?T(t,e):A(t,e)}function I(t){t._onerror&&t._onerror(t._result),B(t)}function A(t,e){t._state===ot&&(t._result=e,t._state=st,0!==t._subscribers.length&&Y(B,t))}function L(t,e){t._state===ot&&(t._state=at,t._result=e,Y(I,t))}function M(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+st]=n,i[o+at]=r,0===o&&t._state&&Y(B,t)}function B(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?N(n,r,i,o):i(o);t._subscribers.length=0}}function D(){this.error=null}function O(t,e){try{return t(e)}catch(n){return ct.error=n,ct}}function N(t,e,n,r){var i,o,s,a,c=u(n);if(c){if(i=O(n,r),i===ct?(a=!0,o=i.error,i=null):s=!0,e===i)return void L(e,k())}else i=r,s=!0;e._state!==ot||(c&&s?C(e,i):a?L(e,o):t===st?A(e,i):t===at&&L(e,i))}function j(t,e){try{e(function(e){C(t,e)},function(e){L(t,e)})}catch(n){L(t,n)}}function U(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(_),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?A(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&A(n.promise,n._result))):L(n.promise,n._validationError())}function z(t){return new lt(this,t).promise}function q(t){function e(t){C(i,t)}function n(t){L(i,t)}var r=this,i=new r(_);if(!G(t))return L(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,s=0;i._state===ot&&o>s;s++)M(r.resolve(t[s]),void 0,e,n);return i}function P(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(_);return C(n,t),n}function R(t){var e=this,n=new e(_);return L(n,t),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function K(t){this._id=vt++,this._state=void 0,this._result=void 0,this._subscribers=[],_!==t&&(u(t)||F(),this instanceof K||H(),j(this,t))}function $(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=mt)}var W;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var V,Q,J,G=W,X=0,Y=({}.toString,function(t,e){it[X]=t,it[X+1]=e,X+=2,2===X&&(Q?Q(g):J())}),Z="undefined"!=typeof window?window:void 0,tt=Z||{},et=tt.MutationObserver||tt.WebKitMutationObserver,nt="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),rt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,it=new Array(1e3);J=nt?h():et?d():rt?v():void 0===Z?y():m();var ot=void 0,st=1,at=2,ut=new D,ct=new D;U.prototype._validateInput=function(t){return G(t)},U.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},U.prototype._init=function(){this._result=new Array(this.length)};var lt=U;U.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===ot&&e>i;i++)t._eachEntry(r[i],i)},U.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;c(t)?t.constructor===r&&t._state!==ot?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},U.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===ot&&(r._remaining--,t===at?L(i,n):r._result[e]=n),0===r._remaining&&A(i,r._result)},U.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,function(t){n._settledAt(st,e,t)},function(t){n._settledAt(at,e,t)})};var ft=z,ht=q,pt=P,dt=R,vt=0,mt=K;K.all=ft,K.race=ht,K.resolve=pt,K.reject=dt,K._setScheduler=l,K._setAsap=f,K._asap=Y,K.prototype={constructor:K,then:function(t,e){var n=this,r=n._state;if(r===st&&!t||r===at&&!e)return this;var i=new this.constructor(_),o=n._result;if(r){var s=arguments[r-1];Y(function(){N(r,i,s,o)})}else M(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var gt=$,yt={Promise:mt,polyfill:gt};n(28).amd?(r=function(){return yt}.call(e,n,e,s),!(void 0!==r&&(s.exports=r))):"undefined"!=typeof s&&s.exports?s.exports=yt:"undefined"!=typeof this&&(this.ES6Promise=yt),gt()}).call(this)}).call(e,n(24),n(25).setImmediate,function(){return this}(),n(26)(t))},function(t,e){function n(){f&&c&&(f=!1,c.length?l=c.concat(l):h=-1,l.length&&r())}function r(){if(!f){var t=s(n);f=!0;for(var e=l.length;e;){for(c=l,l=[];++h<e;)c&&c[h].run();h=-1,e=l.length}c=null,f=!1,a(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a,u=t.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(t){a=function(){throw new Error("clearTimeout is not defined")}}}();var c,l=[],f=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new i(t,e)),1!==l.length||f||s(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(24).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(25).setImmediate,n(25).clearImmediate)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";var r=n(30)["default"],i=n(34),o=n(68),s=n(69),a=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,u={getInstance:function(t){return i.isUndefined(t)?o.instances[0]:i.isString(t)?o.instances.find(function(e){return e.ID===t}):o.instances[t]},getInstanceBySelection:function(){return u.getInstance(s.getClosest(window.getSelection().anchorNode.parentNode,".st-block").getAttribute("data-instance"))},getBlockBySelection:function(){return u.getInstanceBySelection().findBlockById(s.getClosest(window.getSelection().anchorNode.parentNode,".st-block").id)},log:function(){!i.isUndefined(console)&&o.debug&&console.log.apply(console,arguments)},isURI:function(t){return a.test(t)},titleize:function(t){return null===t?"":(t=String(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},classify:function(t){return u.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},flatten:function(t){var e={};return(Array.isArray(t)?t:r(t)).forEach(function(t){e[t]=!0}),e},underscored:function(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(t){return t.split("").reverse().join("")},toSlug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},leftTrim:function(t){return t.replace(/^\s+/,"")}};t.exports=u},function(t,e,n){t.exports={"default":n(31),__esModule:!0}},function(t,e,n){n(32),t.exports=n(7).Object.keys},function(t,e,n){var r=n(12);n(33)("keys",function(t){return function(e){return t(r(e))}})},function(t,e,n){var r=n(5),i=n(7),o=n(16);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){"use strict";e.isEmpty=n(35),e.isFunction=n(49),e.isObject=n(43),e.isString=n(54),e.isUndefined=n(55),e.result=n(56),e.template=n(57),e.uniqueId=n(67)},function(t,e,n){function r(t){var e=!0;if(!t)return e;var n=f.call(t),r=t.length;return n==a||n==c||n==s||n==u&&"number"==typeof r&&o(t.splice)?!r:(i(t,function(){return e=!1}),e)}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(36),o=n(49),s="[object Arguments]",a="[object Array]",u="[object Object]",c="[object String]",l=Object.prototype,f=l.toString;t.exports=r},function(t,e,n){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(37),i=n(52),o=n(44),s=function(t,e,n){var s,a=t,u=a;if(!a)return u;if(!o[typeof a])return u;e=e&&"undefined"==typeof n?e:r(e,n,3);for(var c=-1,l=o[typeof a]&&i(a),f=l?l.length:0;++c<f;)if(s=l[c],e(a[s],s,t)===!1)return u;return u};t.exports=s},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return o;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(a.funcNames&&(r=!t.name),r=r||!a.funcDecomp,!r)){var f=l.call(t);a.funcNames||(r=!u.test(f)),r||(r=c.test(f),s(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return i(t,e)}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(38),o=n(50),s=n(46),a=n(51),u=/^\s*function[ \n\r\t]+\w/,c=/\bthis\b/,l=Function.prototype.toString;t.exports=r},function(t,e,n){function r(t,e){return arguments.length>2?i(t,17,o(arguments,2),null,e):i(t,1,null,null,e)}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(39),o=n(47);t.exports=r},function(t,e,n){function r(t,e,n,u,f,h){var p=1&e,d=2&e,v=4&e,m=16&e,g=32&e;if(!d&&!s(t))throw new TypeError;m&&!n.length&&(e&=-17,m=n=!1),g&&!u.length&&(e&=-33,g=u=!1);var y=t&&t.__bindData__;if(y&&y!==!0)return y=a(y),y[2]&&(y[2]=a(y[2])),y[3]&&(y[3]=a(y[3])),!p||1&y[1]||(y[4]=f),!p&&1&y[1]&&(e|=8),!v||4&y[1]||(y[5]=h),m&&c.apply(y[2]||(y[2]=[]),n),g&&l.apply(y[3]||(y[3]=[]),u),y[1]|=e,r.apply(null,y);var _=1==e||17===e?i:o;return _([t,e,n,u,f,h])}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(40),o=n(48),s=n(49),a=n(47),u=[],c=u.push,l=u.unshift;t.exports=r},function(t,e,n){function r(t){function e(){if(r){var t=a(r);c.apply(t,arguments)}if(this instanceof e){var s=i(n.prototype),l=n.apply(s,t||arguments);return o(l)?l:s}return n.apply(u,t||arguments)}var n=t[0],r=t[2],u=t[4];return s(e,t),e}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(41),o=n(43),s=n(46),a=n(47),u=[],c=u.push;t.exports=r},function(t,e,n){(function(e){function r(t,e){return o(t)?s(t):{}}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(42),o=n(43),s=(n(45),i(s=Object.create)&&s);s||(r=function(){function t(){}return function(n){if(o(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}()),t.exports=r}).call(e,function(){return this}())},function(t,e){function n(t){return"function"==typeof t&&o.test(t)}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=Object.prototype,i=r.toString,o=RegExp("^"+String(i).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=n},function(t,e,n){function r(t){return!(!t||!i[typeof t])}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(44);t.exports=r},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var n={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.exports=n},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
function n(){}t.exports=n},function(t,e,n){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(42),i=n(45),o={configurable:!1,enumerable:!1,value:null,writable:!1},s=function(){try{var t={},e=r(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(i){}return n}(),a=s?function(t,e){o.value=e,s(t,"__bindData__",o)}:i;t.exports=a},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(0>i?0:i);++r<i;)o[r]=t[e+r];return o}t.exports=n},function(t,e,n){function r(t){function e(){var t=d?h:this;if(l){var s=a(l);c.apply(s,arguments)}if((f||m)&&(s||(s=a(arguments)),f&&c.apply(s,f),m&&s.length<p))return u|=16,r([n,g?u:-4&u,s,null,h,p]);if(s||(s=arguments),v&&(n=t[y]),this instanceof e){t=i(n.prototype);var _=n.apply(t,s);return o(_)?_:t}return n.apply(t,s)}var n=t[0],u=t[1],l=t[2],f=t[3],h=t[4],p=t[5],d=1&u,v=2&u,m=4&u,g=8&u,y=n;return s(e,t),e}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(41),o=n(43),s=n(46),a=n(47),u=[],c=u.push;t.exports=r},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
function n(t){return"function"==typeof t}t.exports=n},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
function n(t){return t}t.exports=n},function(t,e,n){(function(e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(42),i=/\bthis\b/,o={};o.funcDecomp=!r(e.WinRTError)&&i.test(function(){return this}),o.funcNames="string"==typeof Function.name,t.exports=o}).call(e,function(){return this}())},function(t,e,n){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(42),i=n(43),o=n(53),s=r(s=Object.keys)&&s,a=s?function(t){return i(t)?s(t):[]}:o;t.exports=a},function(t,e,n){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(44),i=Object.prototype,o=i.hasOwnProperty,s=function(t){var e,n=t,i=[];if(!n)return i;if(!r[typeof t])return i;for(e in n)o.call(n,e)&&i.push(e);return i};t.exports=s},function(t,e){function n(t){return"string"==typeof t||t&&"object"==typeof t&&o.call(t)==r||!1}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r="[object String]",i=Object.prototype,o=i.toString;t.exports=n},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
function n(t){return"undefined"==typeof t}t.exports=n},function(t,e,n){function r(t,e){if(t){var n=t[e];return i(n)?t[e]():n}}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(49);t.exports=r},function(t,e,n){function r(t,e,n){var r=u.imports._.templateSettings||u;t=String(t||""),n=i({},n,r);var m,g=i({},n.imports,r.imports),y=s(g),_=c(g),b=0,k=n.interpolate||d,w="__p += '",x=RegExp((n.escape||d).source+"|"+k.source+"|"+(k===a?p:d).source+"|"+(n.evaluate||d).source+"|$","g");t.replace(x,function(e,n,r,i,s,a){return r||(r=i),w+=t.slice(b,a).replace(v,o),n&&(w+="' +\n__e("+n+") +\n'"),s&&(m=!0,w+="';\n"+s+";\n__p += '"),r&&(w+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),b=a+e.length,e}),w+="';\n";var E=n.variable,S=E;S||(E="obj",w="with ("+E+") {\n"+w+"\n}\n"),w=(m?w.replace(l,""):w).replace(f,"$1").replace(h,"$1;"),w="function("+E+") {\n"+(S?"":E+" || ("+E+" = {});\n")+"var __t, __p = '', __e = _.escape"+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+w+"return __p\n}";try{var T=Function(y,"return "+w).apply(void 0,_)}catch(C){throw C.source=w,C}return e?T(e):(T.source=w,T)}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(58),o=(n(59),n(63)),s=n(52),a=n(64),u=n(65),c=n(66),l=/\b__p \+= '';/g,f=/\b(__p \+=) '' \+/g,h=/(__e\(.*?\)|\b__t\)) \+\n'';/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,d=/($^)/,v=/['\n\r\t\u2028\u2029\\]/g;t.exports=r},function(t,e,n){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(52),i=n(44),o=function(t,e,n){var o,s=t,a=s;if(!s)return a;for(var u=arguments,c=0,l="number"==typeof n?2:u.length;++c<l;)if(s=u[c],s&&i[typeof s])for(var f=-1,h=i[typeof s]&&r(s),p=h?h.length:0;++f<p;)o=h[f],"undefined"==typeof a[o]&&(a[o]=s[o]);return a};t.exports=o},function(t,e,n){function r(t){return null==t?"":String(t).replace(o,i)}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(60),o=(n(52),n(62));t.exports=r},function(t,e,n){function r(t){return i[t]}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(61);t.exports=r},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t.exports=n},function(t,e,n){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(61),i=n(52),o=RegExp("["+i(r).join("")+"]","g");t.exports=o},function(t,e){function n(t){return"\\"+r[t]}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};t.exports=n},function(t,e){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var n=/<%=([\s\S]+?)%>/g;t.exports=n},function(t,e,n){/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=n(59),i=n(64),o={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:i,variable:"",imports:{_:{escape:r}}};t.exports=o},function(t,e,n){function r(t){for(var e=-1,n=i(t),r=n.length,o=Array(r);++e<r;)o[e]=t[n[e]];return o}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var i=n(52);t.exports=r},function(t,e){function n(t){var e=++r;return String(null==t?"":t)+e}/**
	 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
	 * Build: `lodash modularize modern exports="npm" -o ./npm/`
	 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
	 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
	 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 * Available under MIT license <http://lodash.com/license>
	 */
var r=0;t.exports=n},function(t,e){"use strict";var n={html:['<div class="st-block__dropzone">','<svg role="img" class="st-icon"><use xlink:href="<%= config.defaults.iconUrl %>#<%= _.result(block, "icon_name") %>"/></svg>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},r={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},i={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};t.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:n,paste_options:r,upload_options:i},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",attachmentName:"attachment[name]",attachmentFile:"attachment[file]",attachmentUid:"attachment[uid]",baseImageUrl:"/sir-trevor-uploads/",iconUrl:"../src/icons/sir-trevor-icons.svg",errorsContainer:void 0,convertFromMarkdown:!0,formatBar:{commands:[{name:"Bold",title:"bold",iconName:"fmt-bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",iconName:"fmt-italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"fmt-link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"fmt-unlink",cmd:"unlink",text:"link"},{name:"Heading",title:"heading",iconName:"fmt-heading",cmd:"heading",text:"heading"},{name:"Quote",title:"quote",iconName:"fmt-quote",cmd:"quote",text:"quote"}]},ajaxOptions:{headers:{}}}}},function(t,e,n){"use strict";var r=n(70)["default"],i=n(30)["default"],o=n(34),s=r(null);s.setAttributes=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e.html&&(t.innerHTML=o.result(e,"html"),delete e.html),e.text&&(t.textContent=e.text,delete e.text),i(e).forEach(function(n){t.setAttribute(n,e[n])}),t},s.createElement=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=document.createElement(t);return s.setAttributes(n,e),n},s.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},s.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},s.replaceWith=function(t,e){s.remove(e),t.parentNode.replaceChild(e,t)},s.hide=function(t){t.style.display="none"},s.show=function(t){t.style.display=""},s.matches=function(t){var e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=this,n=(e.document||e.ownerDocument).querySelectorAll(t),r=0;n[r]&&n[r]!==e;)r++;return n[r]?!0:!1};return function(t,n){return e.call(t,n)}}(Element.prototype),s.getClosest=function(t,e){for(t;t&&t!==document.body&&!s.matches(t,e);t=t.parentNode);return t},s.wrap=function(t,e){return e=e||document.createElement("div"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e.appendChild(t)},s.createDocumentFragmentFromString=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.childNodes[0];)e.appendChild(n.childNodes[0]);return e},t.exports=s},function(t,e,n){t.exports={"default":n(71),__esModule:!0}},function(t,e,n){var r=n(11);t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){"use strict";var r=n(30)["default"],i=n(34),o=n(68),s=n(29),a={en:{general:{"delete":"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link",yes:"Yes",no:"No"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(s.log("Using i18n stub"),window.i18n={t:function(t,e){var n,s,u,c,l=t.split(":");for(s=a[o.language],c=0;c<l.length;c++)u=l[c],i.isUndefined(s[u])||(s=s[u]);return n=s,i.isString(n)?(n.indexOf("__")>=0&&r(e).forEach(function(t){n=n.replace("__"+t+"__",e[t])}),n):""}}):(s.log("Using i18next"),i18n.init({resStore:a,fallbackLng:o.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),t.exports=a},function(t,e,n){"use strict";t.exports=n(74)},function(t,e,n){var r;!function(i,o){r=function(){return i.Eventable=o()}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this,function(){function t(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}function e(t,e){i[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=(new Date).getTime());return i[o]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}var n=[],r=n.slice,i={on:function(t,e,n){if(!s(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(e,n,r){if(!s(this,"once",e,[n,r])||!n)return this;var i=this,o=t(function(){i.off(e,o),n.apply(this,arguments)});return o._callback=n,this.on(e,o,r)},off:function(t,e,n){var r,i,o,a,u,c,l,f;if(!this._events||!s(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:Object.keys(this._events),u=0,c=a.length;c>u;u++)if(t=a[u],o=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,f=o.length;f>l;l++)i=o[l],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!s(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&a(n,e),i&&a(i,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}},o=/\s+/,s=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(o.test(n)){for(var s=n.split(o),a=0,u=s.length;u>a;a++)t[e].apply(t,[s[a]].concat(r));return!1}return!0},a=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}};return e("listenTo","on"),e("listenToOnce","once"),i.bind=i.on,i.unbind=i.off,i})},function(t,e,n){"use strict";var r=n(2)["default"];t.exports=r({},n(73))},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(29),s=function(t,e){this.mediator=e,this.initialize(t?t.trim():"")};r(s.prototype,{initialize:function(t){this.store=this._parseData(t)||{data:[]}},retrieve:function(){return this.store},toString:function(t){return JSON.stringify(this.store,void 0,t)},reset:function(){o.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(t){return this.store.data.push(t),this.store},_parseData:function(t){var e;if(0===t.length)return e;try{var n=JSON.parse(t);i.isUndefined(n.data)||(e=n)}catch(r){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(r)}return e}}),t.exports=s},function(t,e,n){"use strict";var r=n(2)["default"],i=n(30)["default"],o=n(29),s=n(75),a=function(t){this.form=t,this.initialize()};r(a.prototype,{initialize:function(){this.submitBtns=this.form.querySelectorAll("input[type='submit']");var t=[];Array.prototype.forEach.call(this.submitBtns,function(e,n){t.push(e.getAttribute("value"))}),this.submitBtnTitles=t,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(t,e){Array.prototype.forEach.call(this.submitBtns,function(t,n){t.setAttribute("value",e)})},resetSubmitButton:function(){var t=this.submitBtnTitles;Array.prototype.forEach.call(this.submitBtns,function(e,n){e.setAttribute("value",t[n])})},onUploadStart:function(t){this.globalUploadCount++,o.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(t){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,o.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(t){o.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait")),Array.prototype.forEach.call(this.submitBtns,function(t,e){t.setAttribute("disabled","disabled"),t.classList.add("disabled")})},_enableSubmitButton:function(){this.resetSubmitButton(),Array.prototype.forEach.call(this.submitBtns,function(t,e){t.removeAttribute("disabled"),t.classList.remove("disabled")})},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){i(this._events).forEach(function(t){s.on(t,this[this._events[t]],this)},this)}}),t.exports=a},function(t,e,n){"use strict";var r=n(34),i=n(68),o=n(29),s=n(79),a=n(75);t.exports=function(t,e,n,u){a.trigger("onUploadStart");var c=[t.blockID,(new Date).getTime(),"raw"].join("-"),l=new FormData,f=t.attachmentName||i.defaults.attachmentName,h=t.attachmentFile||i.defaults.attachmentFile,p=t.attachmentUid||i.defaults.attachmentUid;l.append(f,e.name),l.append(h,e),l.append(p,c),t.resetMessages();var d=function(e){o.log("Upload callback called"),a.trigger("onUploadStop",e),!r.isUndefined(n)&&r.isFunction(n)&&n.apply(t,arguments,e),t.removeQueuedItem(c)},v=function(e,n,i){o.log("Upload callback error called"),a.trigger("onUploadStop",void 0,i,n,e),!r.isUndefined(u)&&r.isFunction(u)&&u.call(t,n),t.removeQueuedItem(c)},m=t.uploadUrl||i.defaults.uploadUrl,g=s.fetch(m,{body:l,method:"POST",dataType:"json"});return t.addQueuedItem(c,g),g.then(d)["catch"](v),g}},function(t,e,n){"use strict";var r=n(70)["default"],i=n(2)["default"];n(80);var o=n(81),s=n(82),a=n(68),u=r(null);u.fetch=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e=i({},a.defaults.ajaxOptions,e);var n;return n=e.jsonp?o(t).promise:fetch(t,e).then(function(t){return"json"===e.dataType?t.json():t.text()}),s(n)},t.exports=u},function(t,e){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=t.toString()),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function i(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function o(t){var e=new FileReader;return e.readAsArrayBuffer(t),i(e)}function s(t){var e=new FileReader;return e.readAsText(t),i(e)}function a(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},p.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return d.indexOf(e)>-1?e:t}function c(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new n(e.headers),this.method=u(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function l(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function f(t){var e=new n,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function h(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=t(n),r=e(r);var i=this.map[n];i||(i=[],this.map[n]=i),i.push(r)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,r){this.map[t(n)]=[e(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var p={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.call(c.prototype),a.call(h.prototype),self.Headers=n,self.Request=c,self.Response=h,self.fetch=function(t,e){var n;return n=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e),new Promise(function(t,e){function r(){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0}var i=new XMLHttpRequest;i.onload=function(){var n=1223===i.status?204:i.status;if(100>n||n>599)return void e(new TypeError("Network request failed"));var o={status:n,statusText:i.statusText,headers:f(i),url:r()},s="response"in i?i.response:i.responseText;t(new h(s,o))},i.onerror=function(){e(new TypeError("Network request failed"))},i.open(n.method,n.url,!0),"include"===n.credentials&&(i.withCredentials=!0),"responseType"in i&&p.blob&&(i.responseType="blob"),n.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}()},function(t,e){var n=0,r=function(t,e){e=e||{};var r,i,o,s,a,u=e.prefix||"__jp",c=e.param||"callback",l=e.timeout?e.timeout:15e3,f=document.getElementsByTagName("script")[0]||document.head,h=function(){},p=u+n++;return o=function(){r&&r.parentNode&&r.parentNode.removeChild(r),window[p]=h,i&&clearTimeout(i)},a=new Promise(function(e,n){l&&(i=setTimeout(function(){o(),n(new Error("Timeout"))},l)),window[p]=function(t){o(),e(t)},t+=(~t.indexOf("?")?"&":"?")+c+"="+encodeURIComponent(p),t=t.replace("?&","?"),r=document.createElement("script"),r.src=t,f.parentNode.insertBefore(r,f),s=function(){window[p]&&(o(),n(new Error("Canceled")))}}),{promise:a,cancel:s}};t.exports=r},function(t,e,n){"use strict";var r=n(83)["default"],i=function(t){var e,n,i=new r(function(t,r){e=t,n=r});return t.then(function(t){i.cancelled||e(t)},function(t){i.cancelled||n(t)}),i.cancel=function(){this.cancelled=!0},i};t.exports=i},function(t,e,n){t.exports={"default":n(84),__esModule:!0}},function(t,e,n){n(85),n(86),n(102),n(107),t.exports=n(7).Promise},function(t,e){},function(t,e,n){"use strict";var r=n(87)(!0);n(89)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(88),i=n(13);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return 0>u||u>=c?t?"":void 0:(o=a.charCodeAt(u),55296>o||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):(o-55296<<10)+(s-56320)+65536)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(90),i=n(5),o=n(91),s=n(92),a=n(95),u=n(96),c=n(97),l=n(98),f=n(11).getProto,h=n(99)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",m="values",g=function(){return this};t.exports=function(t,e,n,y,_,b,k){c(n,e,y);var w,x,E=function(t){if(!p&&t in I)return I[t];switch(t){case v:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",T=_==m,C=!1,I=t.prototype,A=I[h]||I[d]||_&&I[_],L=A||E(_);if(A){var M=f(L.call(new t));l(M,S,!0),!r&&a(I,d)&&s(M,h,g),T&&A.name!==m&&(C=!0,L=function(){return A.call(this)})}if(r&&!k||!p&&!C&&I[h]||s(I,h,L),u[e]=L,u[S]=g,_)if(w={values:T?L:E(m),keys:b?L:E(v),entries:T?E("entries"):L},k)for(x in w)x in I||o(I,x,w[x]);else i(i.P+i.F*(p||C),e,w);return w}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(92)},function(t,e,n){var r=n(11),i=n(93);t.exports=n(94)?function(t,e,n){return r.setDesc(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(11),i=n(93),o=n(98),s={};n(92)(s,n(99)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(11).setDesc,i=n(95),o=n(99)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(100)("wks"),i=n(101),o=n(6).Symbol;t.exports=function(t){return r[t]||(r[t]=o&&o[t]||(o||i)("Symbol."+t))}},function(t,e,n){var r=n(6),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){n(103);var r=n(96);r.NodeList=r.HTMLCollection=r.Array},function(t,e,n){"use strict";var r=n(104),i=n(105),o=n(96),s=n(106);t.exports=n(89)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(14),i=n(13);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";var r,i=n(11),o=n(90),s=n(6),a=n(8),u=n(108),c=n(5),l=n(109),f=n(110),h=n(9),p=n(111),d=n(112),v=n(117).set,m=n(118),g=n(99)("species"),y=n(119),_=n(120),b="Promise",k=s.process,w="process"==u(k),x=s[b],E=function(t){var e=new x(function(){});return t&&(e.constructor=Object),x.resolve(e)===e},S=function(){function t(e){var n=new x(e);return v(n,t.prototype),n}var e=!1;try{if(e=x&&x.resolve&&E(),v(t,x),t.prototype=i.create(x.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(94)){var r=!1;x.resolve(i.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(o){e=!1}return e}(),T=function(t,e){return o&&t===x&&e===r?!0:m(t,e)},C=function(t){var e=f(t)[g];return void 0!=e?e:t},I=function(t){var e;return l(t)&&"function"==typeof(e=t.then)?e:!1},A=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=h(e),this.reject=h(n)},L=function(t){try{t()}catch(e){return{error:e}}},M=function(t,e){if(!t.n){t.n=!0;var n=t.c;_(function(){for(var r=t.v,i=1==t.s,o=0,a=function(e){var n,o,s=i?e.ok:e.fail,a=e.resolve,u=e.reject;try{s?(i||(t.h=!0),n=s===!0?r:s(r),n===e.promise?u(TypeError("Promise-chain cycle")):(o=I(n))?o.call(n,a,u):a(n)):u(r)}catch(c){u(c)}};n.length>o;)a(n[o++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,i=t.p;B(i)&&(w?k.emit("unhandledRejection",r,i):(e=s.onunhandledrejection)?e({promise:i,reason:r}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},B=function(t){var e,n=t._d,r=n.a||n.c,i=0;if(n.h)return!1;for(;r.length>i;)if(e=r[i++],e.fail||!B(e.promise))return!1;return!0},D=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),M(e,!0))},O=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=I(t))?_(function(){var r={r:n,d:!1};try{e.call(t,a(O,r,1),a(D,r,1))}catch(i){D.call(r,i)}}):(n.v=t,n.s=1,M(n,!1))}catch(r){D.call({r:n,d:!1},r)}}};S||(x=function(t){h(t);var e=this._d={p:p(this,x,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(a(O,e,1),a(D,e,1))}catch(n){D.call(e,n)}},n(125)(x.prototype,{then:function(t,e){var n=new A(y(this,x)),r=n.promise,i=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,i.c.push(n),i.a&&i.a.push(n),i.s&&M(i,!1),r},"catch":function(t){return this.then(void 0,t)}})),c(c.G+c.W+c.F*!S,{Promise:x}),n(98)(x,b),n(126)(b),r=n(7)[b],c(c.S+c.F*!S,b,{reject:function(t){var e=new A(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(!S||E(!0)),b,{resolve:function(t){if(t instanceof x&&T(t.constructor,this))return t;var e=new A(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(S&&n(127)(function(t){x.all(t)["catch"](function(){})})),b,{all:function(t){var e=C(this),n=new A(e),r=n.resolve,o=n.reject,s=[],a=L(function(){d(t,!1,s.push,s);var n=s.length,a=Array(n);n?i.each.call(s,function(t,i){var s=!1;e.resolve(t).then(function(t){s||(s=!0,a[i]=t,--n||r(a))},o)}):r(a)});return a&&o(a.error),n.promise},race:function(t){var e=C(this),n=new A(e),r=n.reject,i=L(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e,n){var r=n(15),i=n(99)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[i])?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(109);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(8),i=n(113),o=n(114),s=n(110),a=n(115),u=n(116);t.exports=function(t,e,n,c){var l,f,h,p=u(t),d=r(n,c,e?2:1),v=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(o(p))for(l=a(t.length);l>v;v++)e?d(s(f=t[v])[0],f[1]):d(t[v]);else for(h=p.call(t);!(f=h.next()).done;)i(h,d,f.value,e)}},function(t,e,n){var r=n(110);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var s=t["return"];throw void 0!==s&&r(s.call(t)),o}}},function(t,e,n){var r=n(96),i=n(99)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(88),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(108),i=n(99)("iterator"),o=n(96);t.exports=n(7).getIteratorMethod=function(t){return void 0!=t?t[i]||t["@@iterator"]||o[r(t)]:void 0}},function(t,e,n){var r=n(11).getDesc,i=n(109),o=n(110),s=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(8)(Function.call,r(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:s}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(110),i=n(9),o=n(99)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||void 0==(n=r(s)[o])?e:i(n)}},function(t,e,n){var r,i,o,s=n(6),a=n(121).set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,l=s.Promise,f="process"==n(15)(c),h=function(){var t,e,n;for(f&&(t=c.domain)&&(c.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;i=void 0,t&&t.enter()};if(f)o=function(){c.nextTick(h)};else if(u){var p=1,d=document.createTextNode("");new u(h).observe(d,{characterData:!0}),o=function(){d.data=p=-p}}else o=l&&l.resolve?function(){l.resolve().then(h)}:function(){a.call(s,h)};t.exports=function(t){var e={fn:t,next:void 0,domain:f&&c.domain};i&&(i.next=e),r||(r=e,o()),i=e}},function(t,e,n){var r,i,o,s=n(8),a=n(122),u=n(123),c=n(124),l=n(6),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=0,m={},g="onreadystatechange",y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){y.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){a("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete m[t]},"process"==n(15)(f)?r=function(t){f.nextTick(s(y,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=_,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r=g in c("script")?function(t){u.appendChild(c("script"))[g]=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:h,clear:p}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){t.exports=n(6).document&&document.documentElement},function(t,e,n){var r=n(109),i=n(6).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(91);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e,n){"use strict";var r=n(7),i=n(11),o=n(94),s=n(99)("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.setDesc(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(99)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){n=!0},o[r]=function(){return s},t(o)}catch(a){}return n}},function(t,e,n){"use strict";t.exports={Ajaxable:n(129),Controllable:n(130),Droppable:n(132),Fetchable:n(134),Pastable:n(135),Uploadable:n(136),MultiEditable:n(137),Textable:n(229)}},function(t,e,n){"use strict";var r=n(29);t.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){r.log("Adding queued item for "+this.blockID+" called "+t),this._queued.push({name:t,deferred:e})},removeQueuedItem:function(t){r.log("Removing queued item for "+this.blockID+" called "+t),this._queued=this._queued.filter(function(e){return e.name!==t})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(t){r.log("Aborting queued request: "+t.name),t.deferred.cancel()},this)}}},function(t,e,n){"use strict";var r=n(30)["default"],i=n(29),o=n(68),s=n(69),a=n(131);t.exports={mixinName:"Controllable",initializeControllable:function(){i.log("Adding controllable to block "+this.blockID),this.inner.classList.add("st-block__inner--controllable"),this.control_ui=s.createElement("div",{"class":"st-block__control-ui"}),r(this.controls).forEach(function(t){this.addUiControl(t,this.controls[t].bind(this))},this),this.inner.appendChild(this.control_ui)},getControlTemplate:function(t){return s.createElement("a",{"data-icon":t,"class":"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t,html:'<svg role="img" class="st-icon">\n                  <use xlink:href="'+o.defaults.iconUrl+"#"+t+'"/>\n                </svg>'})},addUiControl:function(t,e){var n=this;this.control_ui.appendChild(this.getControlTemplate(t)),a.delegate(this.control_ui,".st-block-control-ui-btn--"+t,"click",function(r){n.selectUiControl(t),e(r)})},selectUiControl:function(t){var e=this,n="st-block-control-ui-btn--selected";r(this.controls).forEach(function(t){e.getControlUiBtn(t).classList.remove(n)}),this.getControlUiBtn(t).classList.add(n)},getControlUiBtn:function(t){return this.control_ui.querySelector(".st-block-control-ui-btn--"+t)}}},function(t,e,n){"use strict";var r=n(69),i=function(t,e){for(var n,r={},i={shared:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),mouseEvent:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),keyEvent:"char charCode key keyCode".split(" ")},o=/^key/,s=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,a=s.test(t.type)?i.shared.concat(i.mouseEvent):o.test(t.type)?i.shared.concat(i.keyEvent):i.shared,u=0;u<a.length;u++)n=a[u],r[n]=t[n];return r.currentTarget=e,r.originalEvent=t,r.preventDefault=function(){this.originalEvent&&this.originalEvent.preventDefault()},r.stopPropagation=function(){this.originalEvent&&this.originalEvent.stopPropagation()},r};t.exports.delegate=function(t,e,n,o){var s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4];t.addEventListener(n,function(n){var s=n.target;for(s;s&&s!==t;s=s.parentNode)if(r.matches(s,e)){o.call(s,i(n,s));break}s=null},s)}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(68),s=n(29),a=n(69),u=n(133),c=n(75);t.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){s.log("Adding droppable to block "+this.blockID),this.drop_options=r({},o.defaults.Block.drop_options,this.drop_options),a.hide(this.editor),this.inputs.insertAdjacentHTML("beforeend",i.template(this.drop_options.html,{block:this,_:i,config:o})),u.dropArea(this.inputs.lastElementChild).addEventListener("drop",this._handleDrop.bind(this)),this.el.classList.add("st-block--droppable"),this.inner.classList.add("st-block__inner--droppable"),this._setupKeyEvents()},_handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.target,n=[].slice.call(t.dataTransfer.types);e.classList.remove("st-dropzone--dragover"),n&&n.some(function(t){return this.valid_drop_file_types.includes(t)},this)&&this.onDrop(t.dataTransfer),c.trigger("block:content:dropped",this.blockID)},focus:function(){this.inner.focus()},_setupKeyEvents:function(){var t=this;this.inner.setAttribute("tabindex",0),this.inner.addEventListener("keyup",function(e){if(e.target===t.inner)switch(e.keyCode){case 13:t.mediator.trigger("block:create","Text",null,t.el);break;case 8:return void t.onDeleteClick.call(t,new CustomEvent("click"))}})}}},function(t,e){"use strict";function n(t){t.preventDefault(),
t.stopPropagation()}function r(t){t.dataTransfer.dropEffect="copy",t.currentTarget.classList.add("st-drag-over"),t.preventDefault(),t.stopPropagation()}function i(t){t.currentTarget.classList.remove("st-drag-over"),t.preventDefault(),t.stopPropagation()}t.exports={dropArea:function(t){return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("dragleave",i),t},noDropArea:function(t){return t.removeEventListener("dragenter"),t.removeEventListener("dragover"),t.removeEventListener("dragleave"),t}}},function(t,e,n){"use strict";var r=n(34),i=n(79);t.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(n(129))},fetch:function(t,e,n,o){function s(t,e){t.call(this,e),this.removeQueuedItem(a)}var a=r.uniqueId(this.blockID+"_fetch"),u=i.fetch(t,e);return this.resetMessages(),this.addQueuedItem(a,u),r.isUndefined(n)||u.then(s.bind(this,n)),r.isUndefined(o)||u["catch"](s.bind(this,o)),u}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(68),s=n(29);t.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){var t=this;s.log("Adding pastable to block "+this.blockID),this.paste_options=r({},o.defaults.Block.paste_options,this.paste_options),this.inputs.insertAdjacentHTML("beforeend",i.template(this.paste_options.html,this)),Array.prototype.forEach.call(this.$(".st-paste-block"),function(e){e.addEventListener("click",function(){var t=document.createEvent("HTMLEvents");t.initEvent("select",!0,!1),this.dispatchEvent(t)}),e.addEventListener("paste",t._handleContentPaste),e.addEventListener("submit",t._handleContentPaste)})}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(68),s=n(29),a=n(78);t.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){s.log("Adding uploadable to block "+this.blockID),this.withMixin(n(129)),this.upload_options=r({},o.defaults.Block.upload_options,this.upload_options),this.inputs.insertAdjacentHTML("beforeend",i.template(this.upload_options.html,this)),Array.prototype.forEach.call(this.inputs.querySelectorAll("button"),function(t){t.addEventListener("click",function(t){t.preventDefault()})}),Array.prototype.forEach.call(this.inputs.querySelectorAll("input"),function(t){t.addEventListener("change",function(t){this.onDrop(t.currentTarget)}.bind(this))}.bind(this))},uploader:function(t,e,n){return a(this,t,e,n)}}},function(t,e,n){"use strict";var r=n(34),i=n(138);t.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(t,e){var n,o,s;o=void 0===t.tagName,o?(s=document.createElement("div"),s.innerHTML=t,n=s.querySelector(".st-block__editor")):n=t;var a=r.uniqueId("editor-");n.setAttribute("data-editorId",a),n.addEventListener("keyup",this.getSelectionForFormatter),n.addEventListener("mouseup",this.getSelectionForFormatter);var u=r.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,c=i.initScribeInstance(n,this.scribeOptions,u);c.setContent(e);var l={node:o?s.removeChild(s.firstChild):n,el:n,scribe:c,id:a};return this.editors[a]=l,l},getCurrentTextEditor:function(){var t=document.activeElement.getAttribute("data-editorId"),e=this.getTextEditor(t);return e&&(this.currentEditor=e),this.currentEditor},appendToTextEditor:function(t,e){var n=this.getTextEditor(t).scribe,r=new n.api.Selection,i=r.range.cloneRange(),o=n.el.lastChild;i.setStartAfter(o),i.collapse(!0),r.selection.removeAllRanges(),r.selection.addRange(i),e&&n.insertHTML(e)},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(t){return this.editors[t]},removeTextEditor:function(t){delete this.editors[t]},execTextBlockCommand:function(t){return i.execTextBlockCommand(this.getCurrentScribeInstance(),t)},queryTextBlockCommandState:function(t){return i.queryTextBlockCommandState(this.getCurrentScribeInstance(),t)}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(139),s=n(68),a=n(206),u=n(207),c=n(208),l={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};t.exports={initScribeInstance:function(t,e,n){e=e||{};var f={debug:s.scribeDebug},h=l;i.isObject(e)&&(f=r(f,e));var p=new o(t,f);return e.hasOwnProperty("tags")&&(h=r(l,e.tags)),p.use(a()),p.use(u()),p.use(c({tags:h})),i.isFunction(n)&&n.call(this,p),p},execTextBlockCommand:function(t,e){if(i.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return t.el.focus(),n.execute()},queryTextBlockCommandState:function(t,e){if(i.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e),r=new t.api.Selection;return r.range&&n.queryState()}}},function(t,e,n){var r,i;r=[n(162),n(192),n(171),n(176),n(179),n(187),n(140),n(200),n(201),n(167),n(165),n(202)],i=function(t,e,n,r,i,o,s,a,u,c,l,f){"use strict";function h(c,h){u.call(this),this.el=c,this.commands={},this.options=f.checkOptions(h),this.commandPatches={},this._plainTextFormatterFactory=new p,this._htmlFormatterFactory=new d,this.api=new o(this),this.Immutable=l;var v=s(this);this.transactionManager=new v,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new a(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1);var m=l.OrderedSet(this.options.defaultPlugins).sort(f.sortByPlugin("setRootPElement")).filter(f.filterByBlockLevelMode(this.allowsBlockElements())).map(function(e){return t[e]}),g=l.List(this.options.defaultFormatters).filter(function(t){return!!n[t]}).map(function(t){return n[t]}),y=l.List.of(i.events),_=l.List(this.options.defaultCommandPatches).map(function(t){return i.commands[t]}),b=l.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return e[t]}),k=l.List().concat(m,g,y,_,b);k.forEach(function(t){this.use(t())}.bind(this)),this.use(r())}function p(){this.formatters=l.List()}function d(){this.formatters={sanitize:l.List(),normalize:l.List(),"export":l.List()}}return h.prototype=Object.create(u.prototype),h.prototype.node=c,h.prototype.element=h.prototype.node,h.prototype.use=function(t){return t(this),this},h.prototype.setHTML=function(t,e){this._lastItem.content=t,e&&(this._skipFormatters=!0),this.el.innerHTML!==t&&(this.el.innerHTML=t)},h.prototype.getHTML=function(){return this.el.innerHTML},h.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},h.prototype.getTextContent=function(){return this.el.textContent},h.prototype.pushHistory=function(){var t=this;if(t.options.undo.enabled){var e=t._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(t.getHTML()!==e){var n=new t.api.Selection;n.placeMarkers();var r=t.getHTML();n.removeMarkers();var i=t.undoManager.item(t.undoManager.position);return(t._merge||t._forceMerge)&&i&&t._lastItem==i[0]?t._lastItem.content=r:(t._lastItem={previousItem:t._lastItem,content:r,scribe:t,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},t.undoManager.transact(t._lastItem,!1)),clearTimeout(t._mergeTimer),t._merge=!0,t._mergeTimer=setTimeout(function(){t._merge=!1},t.options.undo.interval),!0}}return!1},h.prototype.getCommand=function(t){return this.commands[t]||this.commandPatches[t]||new this.api.Command(t)},h.prototype.restoreFromHistory=function(t){this._lastItem=t,this.setHTML(t.content,!0);var e=new this.api.Selection;e.selectMarkers(),this.trigger("content-changed")},h.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},h.prototype.setContent=function(t){this.allowsBlockElements()||(t+="<br>"),this.setHTML(t),this.trigger("content-changed")},h.prototype.insertPlainText=function(t){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(t)+"</p>")},h.prototype.insertHTML=function(t){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(t))},h.prototype.isDebugModeEnabled=function(){return this.options.debug},h.prototype.registerHTMLFormatter=function(t,e){this._htmlFormatterFactory.formatters[t]=this._htmlFormatterFactory.formatters[t].push(e)},h.prototype.registerPlainTextFormatter=function(t){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(t)},p.prototype.format=function(t){var e=this.formatters.reduce(function(t,e){return e(t)},t);return e},d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.prototype.format=function(t){var e=this.formatters.sanitize.concat(this.formatters.normalize),n=e.reduce(function(t,e){return e(t)},t);return n},d.prototype.formatForExport=function(t){return this.formatters["export"].reduce(function(t,e){return e(t)},t)},h}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(141)],i=function(t){"use strict";return function(e){function n(){this.history=[]}return t(n.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(e.pushHistory(),e.trigger("content-changed"))},run:function(t,n){this.start();try{t&&t()}finally{e._forceMerge=n===!0,this.end(),e._forceMerge=!1}}}),n}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(142),n(158)],i=function(t,e){var n=e(t);return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(143),n(144)],i=function(t,e){function n(n,r,i){var o=e(r);if(!i)return t(r,n,o);for(var s=-1,a=o.length;++s<a;){var u=o[s],c=n[u],l=i(c,r[u],u,n,r);(l===l?l===c:c!==c)&&("undefined"!=typeof c||u in n)||(n[u]=l)}return n}return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(145),n(146),n(150),n(151)],i=function(t,e,n,r){var i=e(i=Object.keys)&&i,o=i?function(e){if(e)var o=e.constructor,s=e.length;return"function"==typeof o&&o.prototype===e||"function"!=typeof e&&s&&t(s)?r(e):n(e)?i(e):[]}:r;return o}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){return"number"==typeof t&&t>-1&&t%1==0&&e>=t}var e=Math.pow(2,53)-1;return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(147),n(149)],i=function(t,e){function n(t){return null==t?!1:a.call(t)==r?u.test(s.call(t)):e(t)&&i.test(t)||!1}var r="[object Function]",i=/^\[object .+?Constructor\]$/,o=Object.prototype,s=Function.prototype.toString,a=o.toString,u=RegExp("^"+t(a).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(148)],i=function(t){function e(e){return e=t(e),e&&r.test(e)?e.replace(n,"\\$&"):e}var n=/[.*+?^${}()|[\]\/\\]/g,r=RegExp(n.source);return e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){return"string"==typeof t?t:null==t?"":t+""}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){return t&&"object"==typeof t||!1}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(152),n(153),n(154),n(145),n(155),n(156)],i=function(t,e,n,r,i,o){function s(s){for(var a=i(s),c=a.length,l=c&&s.length,f=l&&r(l)&&(e(s)||o.nonEnumArgs&&t(s)),h=-1,p=[];++h<c;){var d=a[h];(f&&n(d,l)||u.call(s,d))&&p.push(d)}return p}var a=Object.prototype,u=a.hasOwnProperty;return s}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(145),n(149)],i=function(t,e){function n(n){var o=e(n)?n.length:r;return t(o)&&s.call(n)==i||!1}var r,i="[object Arguments]",o=Object.prototype,s=o.toString;return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(145),n(146),n(149)],i=function(t,e,n){var r="[object Array]",i=Object.prototype,o=i.toString,s=e(s=Array.isArray)&&s,a=s||function(e){return n(e)&&t(e.length)&&o.call(e)==r||!1};return a}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t,n){return t=+t,n=null==n?e:n,t>-1&&t%1==0&&n>t}var e=Math.pow(2,53)-1;return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(152),n(153),n(154),n(145),n(150),n(156)],i=function(t,e,n,r,i,o){function s(s){if(null==s)return[];i(s)||(s=Object(s));var a=s.length;a=a&&r(a)&&(e(s)||o.nonEnumArgs&&t(s))&&a||0;for(var c=s.constructor,l=-1,f="function"==typeof c&&c.prototype===s,h=Array(a),p=a>0;++l<a;)h[l]=l+"";for(var d in s)p&&n(d,a)||"constructor"==d&&(f||!u.call(s,d))||h.push(d);return h}var a=Object.prototype,u=a.hasOwnProperty;return s}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(146),n(157)],i=function(t,e){var n=/\bthis\b/,r=Object.prototype,i=(i=e.window)&&i.document,o=r.propertyIsEnumerable,s={};return function(r){s.funcDecomp=!t(e.WinRTError)&&n.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===i.createDocumentFragment().nodeType}catch(a){s.dom=!1}try{s.nonEnumArgs=!o.call(arguments,1)}catch(a){s.nonEnumArgs=!0}}(0,0),s}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;(function(t,n){r=[],i=function(){var r={"function":!0,object:!0},i=r[typeof e]&&e&&!e.nodeType&&e,o=r[typeof t]&&t&&!t.nodeType&&t,s=i&&o&&"object"==typeof n&&n,a=r[typeof window]&&window,u=s||a!==(this&&this.window)&&a||this;return u}.apply(e,r),!(void 0!==i&&(t.exports=i))}).call(e,n(26)(t),function(){return this}())},function(t,e,n){var r,i;r=[n(159),n(161)],i=function(t,e){function n(n){return function(){var r=arguments,i=r.length,o=r[0];if(2>i||null==o)return o;var s=r[i-2],a=r[i-1],u=r[3];i>3&&"function"==typeof s?(s=t(s,a,5),i-=2):(s=i>2&&"function"==typeof a?a:null,i-=s?1:0),u&&e(r[1],r[2],u)&&(s=3==i?null:s,i=2);for(var c=0;++c<i;){var l=r[c];l&&n(o,l,s)}return o}}return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(160)],i=function(t){function e(e,n,r){if("function"!=typeof e)return t;if("undefined"==typeof n)return e;switch(r){case 1:return function(t){return e.call(n,t)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,o){return e.call(n,t,r,i,o)};case 5:return function(t,r,i,o,s){return e.call(n,t,r,i,o,s)}}return function(){return e.apply(n,arguments)}}return e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){return t}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(154),n(145),n(150)],i=function(t,e,n){function r(r,i,o){if(!n(o))return!1;var s=typeof i;if("number"==s)var a=o.length,u=e(a)&&t(i,a);else u="string"==s&&i in o;if(u){var c=o[i];return r===r?r===c:c!==c}return!1}return r}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(163),n(164),n(166),n(170)],i=function(t,e,n,r){"use strict";return{setRootPElement:t,enforcePElements:e,ensureSelectableContainers:n,inlineElementsMode:r}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){""===t.getHTML().trim()&&t.setContent("<p><br></p>")}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(165)],i=function(t){"use strict";return function(){return function(e){function n(e){var n=0;t.List(e.childNodes).filter(function(t){return t.nodeType===Node.TEXT_NODE||!i.isBlockElement(t)}).groupBy(function(t,e,r){return 0===e||t.previousSibling===r.get(e-1)?n:n+=1}).forEach(function(t){i.wrap(t.toArray(),document.createElement("p"))})}function r(t){for(var e,r=0;e=t.children[r++];)"BLOCKQUOTE"===e.tagName&&n(e)}var i=e.node;e.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,n(e),r(e),e.innerHTML})}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){/**
	 *  Copyright (c) 2014-2015, Facebook, Inc.
	 *  All rights reserved.
	 *
	 *  This source code is licensed under the BSD-style license found in the
	 *  LICENSE file in the root directory of this source tree. An additional grant
	 *  of patent rights can be found in the PATENTS file in the same directory.
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:A(t)}function n(t){return s(t)?t:L(t)}function r(t){return a(t)?t:M(t)}function i(t){return o(t)&&!u(t)?t:B(t)}function o(t){return!(!t||!t[cn])}function s(t){return!(!t||!t[ln])}function a(t){return!(!t||!t[fn])}function u(t){return s(t)||a(t)}function c(t){return!(!t||!t[hn])}function l(t){return t.value=!1,t}function f(t){t&&(t.value=!0)}function h(){}function p(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;n>i;i++)r[i]=t[i+e];return r}function d(t){return void 0===t.size&&(t.size=t.__iterate(m)),t.size}function v(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return 0>e?d(t)+e:e}function m(){return!0}function g(t,e,n){return(0===t||void 0!==n&&-n>=t)&&(void 0===e||void 0!==n&&e>=n)}function y(t,e){return b(t,e,0)}function _(t,e){return b(t,e,e)}function b(t,e,n){return void 0===t?n:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function k(t){this.next=t}function w(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function x(){return{value:void 0,done:!0}}function E(t){return!!C(t)}function S(t){return t&&"function"==typeof t.next}function T(t){var e=C(t);return e&&e.call(t)}function C(t){var e=t&&(xn&&t[xn]||t[En]);return"function"==typeof e?e:void 0}function I(t){return t&&"number"==typeof t.length}function A(t){return null===t||void 0===t?z():o(t)?t.toSeq():R(t)}function L(t){return null===t||void 0===t?z().toKeyedSeq():o(t)?s(t)?t.toSeq():t.fromEntrySeq():q(t)}function M(t){return null===t||void 0===t?z():o(t)?s(t)?t.entrySeq():t.toIndexedSeq():P(t)}function B(t){return(null===t||void 0===t?z():o(t)?s(t)?t.entrySeq():t:P(t)).toSetSeq()}function D(t){this._array=t,this.size=t.length}function O(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function N(t){this._iterable=t,this.size=t.length||t.size}function j(t){this._iterator=t,this._iteratorCache=[]}function U(t){return!(!t||!t[Tn])}function z(){return Cn||(Cn=new D([]))}function q(t){var e=Array.isArray(t)?new D(t).fromEntrySeq():S(t)?new j(t).fromEntrySeq():E(t)?new N(t).fromEntrySeq():"object"==typeof t?new O(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function P(t){var e=F(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function R(t){var e=F(t)||"object"==typeof t&&new O(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function F(t){return I(t)?new D(t):S(t)?new j(t):E(t)?new N(t):void 0}function H(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,s=0;o>=s;s++){var a=i[n?o-s:s];if(e(a[1],r?a[0]:s,t)===!1)return s+1}return s}return t.__iterateUncached(e,n)}function K(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,s=0;return new k(function(){var t=i[n?o-s:s];return s++>o?x():w(e,r?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function $(t,e){return e?W(e,t,"",{"":t}):V(t)}function W(t,e,n,r){return Array.isArray(e)?t.call(r,n,M(e).map(function(n,r){return W(t,n,r,e)})):Q(e)?t.call(r,n,L(e).map(function(n,r){return W(t,n,r,e)})):e}function V(t){return Array.isArray(t)?M(t).map(V).toList():Q(t)?L(t).map(V).toMap():t}function Q(t){return t&&(t.constructor===Object||void 0===t.constructor)}function J(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return"function"==typeof t.equals&&"function"==typeof e.equals&&t.equals(e)?!0:!1}function G(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||s(t)!==s(e)||a(t)!==a(e)||c(t)!==c(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(c(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&J(i[1],t)&&(n||J(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var l=t;t=e,e=l}var f=!0,h=e.__iterate(function(e,r){return(n?t.has(e):i?J(e,t.get(r,gn)):J(t.get(r,gn),e))?void 0:(f=!1,!1)});return f&&t.size===h}function X(t,e){if(!(this instanceof X))return new X(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(In)return In;In=this}}function Y(t,e){if(!t)throw new Error(e)}function Z(t,e,n){if(!(this instanceof Z))return new Z(t,e,n);if(Y(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),t>e&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(An)return An;An=this}}function tt(){throw TypeError("Abstract")}function et(){}function nt(){}function rt(){}function it(t){return t>>>1&1073741824|3221225471&t}function ot(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return it(n)}if("string"===e)return t.length>Un?st(t):at(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return ut(t);if("function"==typeof t.toString)return at(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function st(t){var e=Pn[t];return void 0===e&&(e=at(t),qn===zn&&(qn=0,Pn={}),qn++,Pn[t]=e),e}function at(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return it(e)}function ut(t){var e;if(On&&(e=Ln.get(t),void 0!==e))return e;if(e=t[jn],void 0!==e)return e;if(!Dn){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[jn],void 0!==e)return e;if(e=ct(t),void 0!==e)return e}if(e=++Nn,1073741824&Nn&&(Nn=0),On)Ln.set(t,e);else{if(void 0!==Bn&&Bn(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Dn)Object.defineProperty(t,jn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[jn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[jn]=e}}return e}function ct(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function lt(t){Y(t!==1/0,"Cannot perform this action with an infinite size.")}function ft(t){return null===t||void 0===t?wt():ht(t)&&!c(t)?t:wt().withMutations(function(e){var r=n(t);lt(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function ht(t){return!(!t||!t[Rn])}function pt(t,e){this.ownerID=t,this.entries=e}function dt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function vt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function mt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function gt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function yt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&bt(t._root)}function _t(t,e){return w(t,e[0],e[1])}function bt(t,e){return{node:t,index:0,__prev:e}}function kt(t,e,n,r){var i=Object.create(Fn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function wt(){return Hn||(Hn=kt(0))}function xt(t,e,n){var r,i;if(t._root){var o=l(yn),s=l(_n);if(r=Et(t._root,t.__ownerID,0,void 0,e,n,o,s),!s.value)return t;i=t.size+(o.value?n===gn?-1:1:0)}else{if(n===gn)return t;i=1,r=new pt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?kt(i,r):wt()}function Et(t,e,n,r,i,o,s,a){return t?t.update(e,n,r,i,o,s,a):o===gn?t:(f(a),f(s),new gt(e,r,[i,o]))}function St(t){return t.constructor===gt||t.constructor===mt}function Tt(t,e,n,r,i){if(t.keyHash===r)return new mt(e,r,[t.entry,i]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&mn,a=(0===n?r:r>>>n)&mn,u=s===a?[Tt(t,e,n+dn,r,i)]:(o=new gt(e,r,i),a>s?[t,o]:[o,t]);return new dt(e,1<<s|1<<a,u)}function Ct(t,e,n,r){t||(t=new h);for(var i=new gt(t,ot(n),[n,r]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}function It(t,e,n,r){for(var i=0,o=0,s=new Array(n),a=0,u=1,c=e.length;c>a;a++,u<<=1){var l=e[a];void 0!==l&&a!==r&&(i|=u,s[o++]=l)}return new dt(t,i,s)}function At(t,e,n,r,i){for(var o=0,s=new Array(vn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[r]=i,new vt(t,o+1,s)}function Lt(t,e,r){for(var i=[],s=0;s<r.length;s++){var a=r[s],u=n(a);o(a)||(u=u.map(function(t){return $(t)})),i.push(u)}return Dt(t,e,i)}function Mt(t,e,n){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):J(t,e)?t:e}function Bt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&o(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return J(e,i)?e:i}}function Dt(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,gn,function(t){return t===gn?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function Ot(t,e,n,r){var i=t===gn,o=e.next();if(o.done){var s=i?n:t,a=r(s);return a===s?t:a}Y(i||t&&t.set,"invalid keyPath");var u=o.value,c=i?gn:t.get(u,gn),l=Ot(c,e,n,r);return l===c?t:l===gn?t.remove(u):(i?wt():t).set(u,l)}function Nt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function jt(t,e,n,r){var i=r?t:p(t);return i[e]=n,i}function Ut(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),s=0,a=0;i>a;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}function zt(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,s=0;r>s;s++)s===e&&(o=1),i[s]=t[s+o];return i}function qt(t){var e=Kt();if(null===t||void 0===t)return e;if(Pt(t))return t;var n=r(t),i=n.size;return 0===i?e:(lt(i),i>0&&vn>i?Ht(0,i,dn,null,new Rt(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function Pt(t){return!(!t||!t[Vn])}function Rt(t,e){this.array=t,this.ownerID=e}function Ft(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===a?u&&u.array:t&&t.array,i=n>o?0:o-n,c=s-n;return c>vn&&(c=vn),function(){if(i===c)return Gn;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var a,u=t&&t.array,c=i>o?0:o-i>>r,l=(s-i>>r)+1;return l>vn&&(l=vn),function(){for(;;){if(a){var t=a();if(t!==Gn)return t;a=null}if(c===l)return Gn;var o=e?--l:c++;a=n(u&&u[o],r-dn,i+(o<<r))}}}var o=t._origin,s=t._capacity,a=Xt(s),u=t._tail;return n(t._root,t._level,0)}function Ht(t,e,n,r,i,o,s){var a=Object.create(Qn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function Kt(){return Jn||(Jn=Ht(0,0,dn))}function $t(t,e,n){if(e=v(t,e),e!==e)return t;if(e>=t.size||0>e)return t.withMutations(function(t){0>e?Jt(t,e).set(0,n):Jt(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o=l(_n);return e>=Xt(t._capacity)?r=Wt(r,t.__ownerID,0,e,n,o):i=Wt(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Ht(t._origin,t._capacity,t._level,i,r):t}function Wt(t,e,n,r,i,o){var s=r>>>n&mn,a=t&&s<t.array.length;if(!a&&void 0===i)return t;var u;if(n>0){var c=t&&t.array[s],l=Wt(c,e,n-dn,r,i,o);return l===c?t:(u=Vt(t,e),u.array[s]=l,u)}return a&&t.array[s]===i?t:(f(o),u=Vt(t,e),void 0===i&&s===u.array.length-1?u.array.pop():u.array[s]=i,u)}function Vt(t,e){return e&&t&&e===t.ownerID?t:new Rt(t?t.array.slice():[],e)}function Qt(t,e){if(e>=Xt(t._capacity))return t._tail;if(e<1<<t._level+dn){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&mn],r-=dn;return n}}function Jt(t,e,n){void 0!==e&&(e=0|e),void 0!==n&&(n=0|n);var r=t.__ownerID||new h,i=t._origin,o=t._capacity,s=i+e,a=void 0===n?o:0>n?o+n:i+n;if(s===i&&a===o)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,l=0;0>s+l;)c=new Rt(c&&c.array.length?[void 0,c]:[],r),u+=dn,l+=1<<u;l&&(s+=l,i+=l,a+=l,o+=l);for(var f=Xt(o),p=Xt(a);p>=1<<u+dn;)c=new Rt(c&&c.array.length?[c]:[],r),u+=dn;var d=t._tail,v=f>p?Qt(t,a-1):p>f?new Rt([],r):d;if(d&&p>f&&o>s&&d.array.length){c=Vt(c,r);for(var m=c,g=u;g>dn;g-=dn){var y=f>>>g&mn;m=m.array[y]=Vt(m.array[y],r)}m.array[f>>>dn&mn]=d}if(o>a&&(v=v&&v.removeAfter(r,0,a)),s>=p)s-=p,a-=p,u=dn,c=null,v=v&&v.removeBefore(r,0,s);else if(s>i||f>p){for(l=0;c;){var _=s>>>u&mn;if(_!==p>>>u&mn)break;_&&(l+=(1<<u)*_),u-=dn,c=c.array[_]}c&&s>i&&(c=c.removeBefore(r,u,s-l)),c&&f>p&&(c=c.removeAfter(r,u,p-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=v,t.__hash=void 0,t.__altered=!0,t):Ht(s,a,u,c,v)}function Gt(t,e,n){for(var i=[],s=0,a=0;a<n.length;a++){var u=n[a],c=r(u);c.size>s&&(s=c.size),o(u)||(c=c.map(function(t){return $(t)})),i.push(c)}return s>t.size&&(t=t.setSize(s)),Dt(t,e,i)}function Xt(t){return vn>t?0:t-1>>>dn<<dn}function Yt(t){return null===t||void 0===t?ee():Zt(t)?t:ee().withMutations(function(e){var r=n(t);lt(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function Zt(t){return ht(t)&&c(t)}function te(t,e,n,r){var i=Object.create(Yt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function ee(){return Xn||(Xn=te(wt(),Kt()))}function ne(t,e,n){var r,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(n===gn){if(!u)return t;s.size>=vn&&s.size>=2*o.size?(i=s.filter(function(t,e){return void 0!==t&&a!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(n===s.get(a)[1])return t;r=o,i=s.set(a,[e,n])}else r=o.set(e,s.size),i=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):te(r,i)}function re(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function se(t){this._iter=t,this.size=t.size}function ae(t){var e=Ie(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ae,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return e(n,t,r)!==!1},n)},e.__iteratorUncached=function(e,n){if(e===wn){var r=t.__iterator(e,n);return new k(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===kn?bn:kn,n)},e}function ue(t,e,n){var r=Ie(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,gn);return o===gn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,s){return r(e.call(n,t,i,s),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(wn,i);return new k(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return w(r,a,e.call(n,s[1],a,t),i)})},r}function ce(t,e){var n=Ie(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=ae(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Ae,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function le(t,e,n,r){var i=Ie(t);return r&&(i.has=function(r){var i=t.get(r,gn);return i!==gn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,gn);return o!==gn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate(function(t,o,u){return e.call(n,t,o,u)?(a++,i(t,r?o:a-1,s)):void 0},o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(wn,o),a=0;return new k(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(n,l,c,t))return w(i,r?c:a++,l,o)}})},i}function fe(t,e,n){var r=ft().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function he(t,e,n){var r=s(t),i=(c(t)?Yt():ft()).asMutable();t.__iterate(function(o,s){i.update(e.call(n,o,s,t),function(t){return t=t||[],t.push(r?[s,o]:o),t})});var o=Ce(t);return i.map(function(e){return Ee(t,o(e))})}function pe(t,e,n,r){var i=t.size;if(void 0!==e&&(e=0|e),void 0!==n&&(n=0|n),g(e,n,i))return t;var o=y(e,i),s=_(n,i);if(o!==o||s!==s)return pe(t.toSeq().cacheResult(),e,n,r);var a,u=s-o;u===u&&(a=0>u?0:u);var c=Ie(t);return c.size=0===a?a:t.size&&a||void 0,!r&&U(t)&&a>=0&&(c.get=function(e,n){return e=v(this,e),e>=0&&a>e?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var i=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,u=!0,c=0;return t.__iterate(function(t,n){return u&&(u=s++<o)?void 0:(c++,e(t,r?n:c-1,i)!==!1&&c!==a)}),c},c.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);var i=0!==a&&t.__iterator(e,n),s=0,u=0;return new k(function(){for(;s++<o;)i.next();if(++u>a)return x();var t=i.next();return r||e===kn?t:e===bn?w(e,u-1,void 0,t):w(e,u-1,t.value[1],t)})},c}function de(t,e,n){var r=Ie(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return t.__iterate(function(t,i,a){return e.call(n,t,i,a)&&++s&&r(t,i,o)}),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=t.__iterator(wn,i),a=!0;return new k(function(){if(!a)return x();var t=s.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?r===wn?t:w(r,u,c,t):(a=!1,x())})},r}function ve(t,e,n,r){var i=Ie(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,u=0;return t.__iterate(function(t,o,c){return a&&(a=e.call(n,t,o,c))?void 0:(u++,i(t,r?o:u-1,s))}),u},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(wn,o),u=!0,c=0;return new k(function(){var t,o,l;do{if(t=a.next(),t.done)return r||i===kn?t:i===bn?w(i,c++,void 0,t):w(i,c++,t.value[1],t);var f=t.value;o=f[0],l=f[1],u&&(u=e.call(n,l,o,s))}while(u);return i===wn?t:w(i,o,l,t)})},i}function me(t,e){var r=s(t),i=[t].concat(e).map(function(t){return o(t)?r&&(t=n(t)):t=r?q(t):P(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var u=i[0];if(u===t||r&&s(u)||a(t)&&a(u))return u}var c=new D(i);return r?c=c.toKeyedSeq():a(t)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),c}function ge(t,e,n){var r=Ie(t);return r.__iterateUncached=function(r,i){function s(t,c){var l=this;t.__iterate(function(t,i){return(!e||e>c)&&o(t)?s(t,c+1):r(t,n?i:a++,l)===!1&&(u=!0),!u},i)}var a=0,u=!1;return s(t,0),a},r.__iteratorUncached=function(r,i){var s=t.__iterator(r,i),a=[],u=0;return new k(function(){for(;s;){var t=s.next();if(t.done===!1){var c=t.value;if(r===wn&&(c=c[1]),e&&!(a.length<e)||!o(c))return n?t:w(r,u++,c,t);a.push(s),s=c.__iterator(r,i)}else s=a.pop()}return x()})},r}function ye(t,e,n){var r=Ce(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function _e(t,e){var n=Ie(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t,r){return(!o||n(e,o++,i)!==!1)&&n(t,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(kn,r),s=0;return new k(function(){return(!i||s%2)&&(i=o.next(),i.done)?i:s%2?w(n,s++,e):w(n,s++,i.value,i)})},n}function be(t,e,n){e||(e=Le);var r=s(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?L(o):a(t)?M(o):B(o)}function ke(t,e,n){if(e||(e=Le),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return we(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return we(e,t,n)?n:t})}function we(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function xe(t,n,r){var i=Ie(t);return i.size=new D(r).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(kn,e),i=0;!(n=r.next()).done&&t(n.value,i++,this)!==!1;);return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=e(t),T(i?t.reverse():t)}),s=0,a=!1;return new k(function(){var e;return a||(e=o.map(function(t){return t.next()}),a=e.some(function(t){return t.done})),a?x():w(t,s++,n.apply(null,e.map(function(t){return t.value})))})},i}function Ee(t,e){return U(t)?e:t.constructor(e)}function Se(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Te(t){return lt(t.size),d(t)}function Ce(t){return s(t)?n:a(t)?r:i}function Ie(t){return Object.create((s(t)?L:a(t)?M:B).prototype)}function Ae(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):A.prototype.cacheResult.call(this)}function Le(t,e){return t>e?1:e>t?-1:0}function Me(t){var n=T(t);if(!n){if(!I(t))throw new TypeError("Expected iterable or array-like: "+t);n=T(e(t))}return n}function Be(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t);Ne(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=ft(o)},i=r.prototype=Object.create(Yn);return i.constructor=r,r}function De(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Oe(t){return t._name||t.constructor.name||"Record"}function Ne(t,e){try{e.forEach(je.bind(void 0,t))}catch(n){}}function je(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Y(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Ue(t){return null===t||void 0===t?Re():ze(t)&&!c(t)?t:Re().withMutations(function(e){var n=i(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function ze(t){return!(!t||!t[Zn])}function qe(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Pe(t,e){var n=Object.create(tr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Re(){return er||(er=Pe(wt()))}function Fe(t){return null===t||void 0===t?$e():He(t)?t:$e().withMutations(function(e){var n=i(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function He(t){return ze(t)&&c(t)}function Ke(t,e){var n=Object.create(nr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function $e(){return rr||(rr=Ke(ee()))}function We(t){return null===t||void 0===t?Je():Ve(t)?t:Je().unshiftAll(t)}function Ve(t){return!(!t||!t[ir])}function Qe(t,e,n,r){var i=Object.create(or);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Je(){return sr||(sr=Qe(0))}function Ge(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Xe(t,e){return e}function Ye(t,e){return[e,t]}function Ze(t){return function(){return!t.apply(this,arguments)}}function tn(t){return function(){return-t.apply(this,arguments)}}function en(t){return"string"==typeof t?JSON.stringify(t):t}function nn(){return p(arguments)}function rn(t,e){return e>t?1:t>e?-1:0}function on(t){if(t.size===1/0)return 0;var e=c(t),n=s(t),r=e?1:0,i=t.__iterate(n?e?function(t,e){r=31*r+an(ot(t),ot(e))|0}:function(t,e){r=r+an(ot(t),ot(e))|0}:e?function(t){r=31*r+ot(t)|0}:function(t){r=r+ot(t)|0});return sn(i,r)}function sn(t,e){return e=Mn(e,3432918353),e=Mn(e<<15|e>>>-15,461845907),e=Mn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Mn(e^e>>>16,2246822507),e=Mn(e^e>>>13,3266489909),e=it(e^e>>>16)}function an(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var un=Array.prototype.slice;t(n,e),t(r,e),t(i,e),e.isIterable=o,e.isKeyed=s,e.isIndexed=a,e.isAssociative=u,e.isOrdered=c,e.Keyed=n,e.Indexed=r,e.Set=i;var cn="@@__IMMUTABLE_ITERABLE__@@",ln="@@__IMMUTABLE_KEYED__@@",fn="@@__IMMUTABLE_INDEXED__@@",hn="@@__IMMUTABLE_ORDERED__@@",pn="delete",dn=5,vn=1<<dn,mn=vn-1,gn={},yn={value:!1},_n={value:!1},bn=0,kn=1,wn=2,xn="function"==typeof Symbol&&Symbol.iterator,En="@@iterator",Sn=xn||En;k.prototype.toString=function(){return"[Iterator]"},k.KEYS=bn,k.VALUES=kn,k.ENTRIES=wn,k.prototype.inspect=k.prototype.toSource=function(){return this.toString()},k.prototype[Sn]=function(){return this},t(A,e),A.of=function(){return A(arguments)},A.prototype.toSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq {","}")},A.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},A.prototype.__iterate=function(t,e){return H(this,t,e,!0)},A.prototype.__iterator=function(t,e){return K(this,t,e,!0)},t(L,A),L.prototype.toKeyedSeq=function(){return this},t(M,A),M.of=function(){return M(arguments)},M.prototype.toIndexedSeq=function(){return this},M.prototype.toString=function(){return this.__toString("Seq [","]")},M.prototype.__iterate=function(t,e){return H(this,t,e,!1)},M.prototype.__iterator=function(t,e){return K(this,t,e,!1)},t(B,A),B.of=function(){return B(arguments)},B.prototype.toSetSeq=function(){return this},A.isSeq=U,A.Keyed=L,A.Set=B,A.Indexed=M;var Tn="@@__IMMUTABLE_SEQ__@@";A.prototype[Tn]=!0,t(D,M),D.prototype.get=function(t,e){return this.has(t)?this._array[v(this,t)]:e},D.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;r>=i;i++)if(t(n[e?r-i:i],i,this)===!1)return i+1;return i},D.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new k(function(){return i>r?x():w(t,i,n[e?r-i++:i++])})},t(O,L),O.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},O.prototype.has=function(t){return this._object.hasOwnProperty(t)},O.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;i>=o;o++){var s=r[e?i-o:o];if(t(n[s],s,this)===!1)return o+1}return o},O.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new k(function(){var s=r[e?i-o:o];return o++>i?x():w(t,s,n[s])})},O.prototype[hn]=!0,t(N,M),N.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=T(n),i=0;if(S(r))for(var o;!(o=r.next()).done&&t(o.value,i++,this)!==!1;);return i},N.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=T(n);if(!S(r))return new k(x);var i=0;return new k(function(){var e=r.next();return e.done?e:w(t,i++,e.value)})},t(j,M),j.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(t(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var s=o.value;if(r[i]=s,t(s,i++,this)===!1)break}return i},j.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new k(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return w(t,i,r[i++])})};var Cn;t(X,M),X.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},X.prototype.get=function(t,e){return this.has(t)?this._value:e},X.prototype.includes=function(t){return J(this._value,t)},X.prototype.slice=function(t,e){var n=this.size;return g(t,e,n)?this:new X(this._value,_(e,n)-y(t,n))},X.prototype.reverse=function(){return this},X.prototype.indexOf=function(t){return J(this._value,t)?0:-1},X.prototype.lastIndexOf=function(t){return J(this._value,t)?this.size:-1},X.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(t(this._value,n,this)===!1)return n+1;return n},X.prototype.__iterator=function(t,e){var n=this,r=0;return new k(function(){return r<n.size?w(t,r++,n._value):x()})},X.prototype.equals=function(t){return t instanceof X?J(this._value,t._value):G(t)};var In;t(Z,M),Z.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Z.prototype.get=function(t,e){return this.has(t)?this._start+v(this,t)*this._step:e},Z.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Z.prototype.slice=function(t,e){return g(t,e,this.size)?this:(t=y(t,this.size),e=_(e,this.size),t>=e?new Z(0,0):new Z(this.get(t,this._end),this.get(e,this._end),this._step))},Z.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Z.prototype.lastIndexOf=function(t){return this.indexOf(t)},Z.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;n>=o;o++){if(t(i,o,this)===!1)return o+1;i+=e?-r:r}return o},Z.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new k(function(){var s=i;return i+=e?-r:r,o>n?x():w(t,o++,s)})},Z.prototype.equals=function(t){return t instanceof Z?this._start===t._start&&this._end===t._end&&this._step===t._step:G(this,t)};var An;t(tt,e),t(et,tt),t(nt,tt),t(rt,tt),tt.Keyed=et,tt.Indexed=nt,tt.Set=rt;var Ln,Mn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t=0|t,e=0|e;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},Bn=Object.isExtensible,Dn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),On="function"==typeof WeakMap;On&&(Ln=new WeakMap);var Nn=0,jn="__immutablehash__";"function"==typeof Symbol&&(jn=Symbol(jn));var Un=16,zn=255,qn=0,Pn={};t(ft,et),ft.prototype.toString=function(){return this.__toString("Map {","}")},ft.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ft.prototype.set=function(t,e){return xt(this,t,e)},ft.prototype.setIn=function(t,e){return this.updateIn(t,gn,function(){return e})},ft.prototype.remove=function(t){return xt(this,t,gn)},ft.prototype.deleteIn=function(t){return this.updateIn(t,function(){return gn})},ft.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},ft.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=Ot(this,Me(t),e,n);return r===gn?void 0:r},ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):wt()},ft.prototype.merge=function(){return Lt(this,void 0,arguments)},ft.prototype.mergeWith=function(t){var e=un.call(arguments,1);return Lt(this,t,e)},ft.prototype.mergeIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ft.prototype.mergeDeep=function(){return Lt(this,Mt,arguments)},ft.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return Lt(this,Bt(t),e)},ft.prototype.mergeDeepIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ft.prototype.sort=function(t){return Yt(be(this,t))},ft.prototype.sortBy=function(t,e){return Yt(be(this,e,t))},ft.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new h)},ft.prototype.asImmutable=function(){return this.__ensureOwner()},ft.prototype.wasAltered=function(){return this.__altered},ft.prototype.__iterator=function(t,e){return new yt(this,t,e)},ft.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},ft.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?kt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ft.isMap=ht;var Rn="@@__IMMUTABLE_MAP__@@",Fn=ft.prototype;Fn[Rn]=!0,Fn[pn]=Fn.remove,Fn.removeIn=Fn.deleteIn,pt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;s>o;o++)if(J(n,i[o][0]))return i[o][1];return r},pt.prototype.update=function(t,e,n,r,i,o,s){for(var a=i===gn,u=this.entries,c=0,l=u.length;l>c&&!J(r,u[c][0]);c++);
var h=l>c;if(h?u[c][1]===i:a)return this;if(f(s),(a||!h)&&f(o),!a||1!==u.length){if(!h&&!a&&u.length>=Kn)return Ct(t,u,r,i);var d=t&&t===this.ownerID,v=d?u:p(u);return h?a?c===l-1?v.pop():v[c]=v.pop():v[c]=[r,i]:v.push([r,i]),d?(this.entries=v,this):new pt(t,v)}},dt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=1<<((0===t?e:e>>>t)&mn),o=this.bitmap;return 0===(o&i)?r:this.nodes[Nt(o&i-1)].get(t+dn,e,n,r)},dt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=ot(r));var a=(0===e?n:n>>>e)&mn,u=1<<a,c=this.bitmap,l=0!==(c&u);if(!l&&i===gn)return this;var f=Nt(c&u-1),h=this.nodes,p=l?h[f]:void 0,d=Et(p,t,e+dn,n,r,i,o,s);if(d===p)return this;if(!l&&d&&h.length>=$n)return At(t,h,c,a,d);if(l&&!d&&2===h.length&&St(h[1^f]))return h[1^f];if(l&&d&&1===h.length&&St(d))return d;var v=t&&t===this.ownerID,m=l?d?c:c^u:c|u,g=l?d?jt(h,f,d,v):zt(h,f,v):Ut(h,f,d,v);return v?(this.bitmap=m,this.nodes=g,this):new dt(t,m,g)},vt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=(0===t?e:e>>>t)&mn,o=this.nodes[i];return o?o.get(t+dn,e,n,r):r},vt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=ot(r));var a=(0===e?n:n>>>e)&mn,u=i===gn,c=this.nodes,l=c[a];if(u&&!l)return this;var f=Et(l,t,e+dn,n,r,i,o,s);if(f===l)return this;var h=this.count;if(l){if(!f&&(h--,Wn>h))return It(t,c,h,a)}else h++;var p=t&&t===this.ownerID,d=jt(c,a,f,p);return p?(this.count=h,this.nodes=d,this):new vt(t,h,d)},mt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;s>o;o++)if(J(n,i[o][0]))return i[o][1];return r},mt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=ot(r));var a=i===gn;if(n!==this.keyHash)return a?this:(f(s),f(o),Tt(this,t,e,n,[r,i]));for(var u=this.entries,c=0,l=u.length;l>c&&!J(r,u[c][0]);c++);var h=l>c;if(h?u[c][1]===i:a)return this;if(f(s),(a||!h)&&f(o),a&&2===l)return new gt(t,this.keyHash,u[1^c]);var d=t&&t===this.ownerID,v=d?u:p(u);return h?a?c===l-1?v.pop():v[c]=v.pop():v[c]=[r,i]:v.push([r,i]),d?(this.entries=v,this):new mt(t,this.keyHash,v)},gt.prototype.get=function(t,e,n,r){return J(n,this.entry[0])?this.entry[1]:r},gt.prototype.update=function(t,e,n,r,i,o,s){var a=i===gn,u=J(r,this.entry[0]);return(u?i===this.entry[1]:a)?this:(f(s),a?void f(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new gt(t,this.keyHash,[r,i]):(f(o),Tt(this,t,e,ot(r),[r,i])))},pt.prototype.iterate=mt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;i>=r;r++)if(t(n[e?i-r:r])===!1)return!1},dt.prototype.iterate=vt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;i>=r;r++){var o=n[e?i-r:r];if(o&&o.iterate(t,e)===!1)return!1}},gt.prototype.iterate=function(t,e){return t(this.entry)},t(yt,k),yt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return _t(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,n>=i)return _t(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,n>=i){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return _t(t,o.entry);e=this._stack=bt(o,e)}continue}e=this._stack=this._stack.__prev}return x()};var Hn,Kn=vn/4,$n=vn/2,Wn=vn/4;t(qt,nt),qt.of=function(){return this(arguments)},qt.prototype.toString=function(){return this.__toString("List [","]")},qt.prototype.get=function(t,e){if(t=v(this,t),t>=0&&t<this.size){t+=this._origin;var n=Qt(this,t);return n&&n.array[t&mn]}return e},qt.prototype.set=function(t,e){return $t(this,t,e)},qt.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},qt.prototype.insert=function(t,e){return this.splice(t,0,e)},qt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=dn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Kt()},qt.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Jt(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},qt.prototype.pop=function(){return Jt(this,0,-1)},qt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Jt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},qt.prototype.shift=function(){return Jt(this,1)},qt.prototype.merge=function(){return Gt(this,void 0,arguments)},qt.prototype.mergeWith=function(t){var e=un.call(arguments,1);return Gt(this,t,e)},qt.prototype.mergeDeep=function(){return Gt(this,Mt,arguments)},qt.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return Gt(this,Bt(t),e)},qt.prototype.setSize=function(t){return Jt(this,0,t)},qt.prototype.slice=function(t,e){var n=this.size;return g(t,e,n)?this:Jt(this,y(t,n),_(e,n))},qt.prototype.__iterator=function(t,e){var n=0,r=Ft(this,e);return new k(function(){var e=r();return e===Gn?x():w(t,n++,e)})},qt.prototype.__iterate=function(t,e){for(var n,r=0,i=Ft(this,e);(n=i())!==Gn&&t(n,r++,this)!==!1;);return r},qt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ht(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},qt.isList=Pt;var Vn="@@__IMMUTABLE_LIST__@@",Qn=qt.prototype;Qn[Vn]=!0,Qn[pn]=Qn.remove,Qn.setIn=Fn.setIn,Qn.deleteIn=Qn.removeIn=Fn.removeIn,Qn.update=Fn.update,Qn.updateIn=Fn.updateIn,Qn.mergeIn=Fn.mergeIn,Qn.mergeDeepIn=Fn.mergeDeepIn,Qn.withMutations=Fn.withMutations,Qn.asMutable=Fn.asMutable,Qn.asImmutable=Fn.asImmutable,Qn.wasAltered=Fn.wasAltered,Rt.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&mn;if(r>=this.array.length)return new Rt([],t);var i,o=0===r;if(e>0){var s=this.array[r];if(i=s&&s.removeBefore(t,e-dn,n),i===s&&o)return this}if(o&&!i)return this;var a=Vt(this,t);if(!o)for(var u=0;r>u;u++)a.array[u]=void 0;return i&&(a.array[r]=i),a},Rt.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&mn;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if(i=o&&o.removeAfter(t,e-dn,n),i===o&&r===this.array.length-1)return this}var s=Vt(this,t);return s.array.splice(r+1),i&&(s.array[r]=i),s};var Jn,Gn={};t(Yt,ft),Yt.of=function(){return this(arguments)},Yt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Yt.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Yt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Yt.prototype.set=function(t,e){return ne(this,t,e)},Yt.prototype.remove=function(t){return ne(this,t,gn)},Yt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Yt.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Yt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Yt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?te(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Yt.isOrderedMap=Zt,Yt.prototype[hn]=!0,Yt.prototype[pn]=Yt.prototype.remove;var Xn;t(re,L),re.prototype.get=function(t,e){return this._iter.get(t,e)},re.prototype.has=function(t){return this._iter.has(t)},re.prototype.valueSeq=function(){return this._iter.valueSeq()},re.prototype.reverse=function(){var t=this,e=ce(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},re.prototype.map=function(t,e){var n=this,r=ue(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},re.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Te(this):0,function(i){return t(i,e?--n:n++,r)}),e)},re.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(kn,e),r=e?Te(this):0;return new k(function(){var i=n.next();return i.done?i:w(t,e?--r:r++,i.value,i)})},re.prototype[hn]=!0,t(ie,M),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(kn,e),r=0;return new k(function(){var e=n.next();return e.done?e:w(t,r++,e.value,e)})},t(oe,B),oe.prototype.has=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},oe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(kn,e);return new k(function(){var e=n.next();return e.done?e:w(t,e.value,e.value,e)})},t(se,L),se.prototype.entrySeq=function(){return this._iter.toSeq()},se.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Se(e);var r=o(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},se.prototype.__iterator=function(t,e){var n=this._iter.__iterator(kn,e);return new k(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Se(r);var i=o(r);return w(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},ie.prototype.cacheResult=re.prototype.cacheResult=oe.prototype.cacheResult=se.prototype.cacheResult=Ae,t(Be,et),Be.prototype.toString=function(){return this.__toString(Oe(this)+" {","}")},Be.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Be.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Be.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=De(this,wt()))},Be.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Oe(this));var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:De(this,n)},Be.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:De(this,e)},Be.prototype.wasAltered=function(){return this._map.wasAltered()},Be.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},Be.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},Be.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?De(this,e,t):(this.__ownerID=t,this._map=e,this)};var Yn=Be.prototype;Yn[pn]=Yn.remove,Yn.deleteIn=Yn.removeIn=Fn.removeIn,Yn.merge=Fn.merge,Yn.mergeWith=Fn.mergeWith,Yn.mergeIn=Fn.mergeIn,Yn.mergeDeep=Fn.mergeDeep,Yn.mergeDeepWith=Fn.mergeDeepWith,Yn.mergeDeepIn=Fn.mergeDeepIn,Yn.setIn=Fn.setIn,Yn.update=Fn.update,Yn.updateIn=Fn.updateIn,Yn.withMutations=Fn.withMutations,Yn.asMutable=Fn.asMutable,Yn.asImmutable=Fn.asImmutable,t(Ue,rt),Ue.of=function(){return this(arguments)},Ue.fromKeys=function(t){return this(n(t).keySeq())},Ue.prototype.toString=function(){return this.__toString("Set {","}")},Ue.prototype.has=function(t){return this._map.has(t)},Ue.prototype.add=function(t){return qe(this,this._map.set(t,!0))},Ue.prototype.remove=function(t){return qe(this,this._map.remove(t))},Ue.prototype.clear=function(){return qe(this,this._map.clear())},Ue.prototype.union=function(){var t=un.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Ue.prototype.intersect=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},Ue.prototype.subtract=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},Ue.prototype.merge=function(){return this.union.apply(this,arguments)},Ue.prototype.mergeWith=function(t){var e=un.call(arguments,1);return this.union.apply(this,e)},Ue.prototype.sort=function(t){return Fe(be(this,t))},Ue.prototype.sortBy=function(t,e){return Fe(be(this,e,t))},Ue.prototype.wasAltered=function(){return this._map.wasAltered()},Ue.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},Ue.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Ue.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Ue.isSet=ze;var Zn="@@__IMMUTABLE_SET__@@",tr=Ue.prototype;tr[Zn]=!0,tr[pn]=tr.remove,tr.mergeDeep=tr.merge,tr.mergeDeepWith=tr.mergeWith,tr.withMutations=Fn.withMutations,tr.asMutable=Fn.asMutable,tr.asImmutable=Fn.asImmutable,tr.__empty=Re,tr.__make=Pe;var er;t(Fe,Ue),Fe.of=function(){return this(arguments)},Fe.fromKeys=function(t){return this(n(t).keySeq())},Fe.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Fe.isOrderedSet=He;var nr=Fe.prototype;nr[hn]=!0,nr.__empty=$e,nr.__make=Ke;var rr;t(We,nt),We.of=function(){return this(arguments)},We.prototype.toString=function(){return this.__toString("Stack [","]")},We.prototype.get=function(t,e){var n=this._head;for(t=v(this,t);n&&t--;)n=n.next;return n?n.value:e},We.prototype.peek=function(){return this._head&&this._head.value},We.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Qe(t,e)},We.prototype.pushAll=function(t){if(t=r(t),0===t.size)return this;lt(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Qe(e,n)},We.prototype.pop=function(){return this.slice(1)},We.prototype.unshift=function(){return this.push.apply(this,arguments)},We.prototype.unshiftAll=function(t){return this.pushAll(t)},We.prototype.shift=function(){return this.pop.apply(this,arguments)},We.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Je()},We.prototype.slice=function(t,e){if(g(t,e,this.size))return this;var n=y(t,this.size),r=_(e,this.size);if(r!==this.size)return nt.prototype.slice.call(this,t,e);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Qe(i,o)},We.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Qe(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},We.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&t(r.value,n++,this)!==!1;)r=r.next;return n},We.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new k(function(){if(r){var e=r.value;return r=r.next,w(t,n++,e)}return x()})},We.isStack=Ve;var ir="@@__IMMUTABLE_STACK__@@",or=We.prototype;or[ir]=!0,or.withMutations=Fn.withMutations,or.asMutable=Fn.asMutable,or.asImmutable=Fn.asImmutable,or.wasAltered=Fn.wasAltered;var sr;e.Iterator=k,Ge(e,{toArray:function(){lt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new re(this,!0)},toMap:function(){return ft(this.toKeyedSeq())},toObject:function(){lt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Yt(this.toKeyedSeq())},toOrderedSet:function(){return Fe(s(this)?this.valueSeq():this)},toSet:function(){return Ue(s(this)?this.valueSeq():this)},toSetSeq:function(){return new oe(this)},toSeq:function(){return a(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return We(s(this)?this.valueSeq():this)},toList:function(){return qt(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=un.call(arguments,0);return Ee(this,me(this,t))},includes:function(t){return this.some(function(e){return J(e,t)})},entries:function(){return this.__iterator(wn)},every:function(t,e){lt(this.size);var n=!0;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?void 0:(n=!1,!1)}),n},filter:function(t,e){return Ee(this,le(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},findEntry:function(t,e){var n;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?(n=[i,r],!1):void 0}),n},findLastEntry:function(t,e){return this.toSeq().reverse().findEntry(t,e)},forEach:function(t,e){return lt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){lt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(bn)},map:function(t,e){return Ee(this,ue(this,t,e))},reduce:function(t,e,n){lt(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)}),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Ee(this,ce(this,!0))},slice:function(t,e){return Ee(this,pe(this,t,e,!0))},some:function(t,e){return!this.every(Ze(t),e)},sort:function(t){return Ee(this,be(this,t))},values:function(){return this.__iterator(kn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return d(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return fe(this,t,e)},equals:function(t){return G(this,t)},entrySeq:function(){var t=this;if(t._cache)return new D(t._cache);var e=t.toSeq().map(Ye).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ze(t),e)},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},first:function(){return this.find(m)},flatMap:function(t,e){return Ee(this,ye(this,t,e))},flatten:function(t){return Ee(this,ge(this,t,!0))},fromEntrySeq:function(){return new se(this)},get:function(t,e){return this.find(function(e,n){return J(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=Me(t);!(n=i.next()).done;){var o=n.value;if(r=r&&r.get?r.get(o,gn):gn,r===gn)return e}return r},groupBy:function(t,e){return he(this,t,e)},has:function(t){return this.get(t,gn)!==gn},hasIn:function(t){return this.getIn(t,gn)!==gn},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keySeq:function(){return this.toSeq().map(Xe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return ke(this,t)},maxBy:function(t,e){return ke(this,e,t)},min:function(t){return ke(this,t?tn(t):rn)},minBy:function(t,e){return ke(this,e?tn(e):rn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ee(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Ee(this,ve(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ze(t),e)},sortBy:function(t,e){return Ee(this,be(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ee(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Ee(this,de(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ze(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var ar=e.prototype;ar[cn]=!0,ar[Sn]=ar.values,ar.__toJS=ar.toArray,ar.__toStringMapper=en,ar.inspect=ar.toSource=function(){return this.toString()},ar.chain=ar.flatMap,ar.contains=ar.includes,function(){try{Object.defineProperty(ar,"length",{get:function(){if(!e.noLengthWarning){var t;try{throw new Error}catch(n){t=n.stack}if(-1===t.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+t),this.size}}})}catch(t){}}(),Ge(n,{flip:function(){return Ee(this,ae(this))},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return J(e,t)})},lastKeyOf:function(t){return this.findLastKey(function(e){return J(e,t)})},mapEntries:function(t,e){var n=this,r=0;return Ee(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Ee(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var ur=n.prototype;ur[ln]=!0,ur[Sn]=ar.entries,ur.__toJS=ar.toObject,ur.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+en(t)},Ge(r,{toKeyedSeq:function(){return new re(this,!1)},filter:function(t,e){return Ee(this,le(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.toKeyedSeq().reverse().keyOf(t);return void 0===e?-1:e},reverse:function(){return Ee(this,ce(this,!1))},slice:function(t,e){return Ee(this,pe(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=y(t,0>t?this.count():this.size);var r=this.slice(0,t);return Ee(this,1===n?r:r.concat(p(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.toKeyedSeq().findLastKey(t,e);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(t){return Ee(this,ge(this,t,!1))},get:function(t,e){return t=v(this,t),0>t||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=v(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ee(this,_e(this,t))},interleave:function(){var t=[this].concat(p(arguments)),e=xe(this.toSeq(),M.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Ee(this,n)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Ee(this,ve(this,t,e,!1))},zip:function(){var t=[this].concat(p(arguments));return Ee(this,xe(this,nn,t))},zipWith:function(t){var e=p(arguments);return e[0]=this,Ee(this,xe(this,t,e))}}),r.prototype[fn]=!0,r.prototype[hn]=!0,Ge(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=ar.includes,Ge(L,n.prototype),Ge(M,r.prototype),Ge(B,i.prototype),Ge(et,n.prototype),Ge(nt,r.prototype),Ge(rt,i.prototype);var cr={Iterable:e,Seq:A,Collection:tt,Map:ft,OrderedMap:Yt,List:qt,Stack:We,Set:Ue,OrderedSet:Fe,Record:Be,Range:Z,Repeat:X,is:J,fromJS:$};return cr})},function(t,e,n){var r,i;r=[n(167),n(165)],i=function(t,e){"use strict";function n(e){return t.isCaretPositionNode(e)?!0:""===e.parentNode.textContent.trim()}function r(e){function o(e){return 0===e.children.length&&t.isBlockElement(e)||1===e.children.length&&t.isSelectionMarkerNode(e.children[0])?!0:t.isBlockElement(e)||0!==e.children.length?!1:n(e)}for(var s=e.firstElementChild;s;)t.isSelectionMarkerNode(s)||(o(s)&&""===s.textContent.trim()&&!i.includes(s.nodeName)?s.appendChild(document.createElement("br")):s.children.length>0&&r(s)),s=s.nextElementSibling}var i=e.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(t){t.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,r(e),e.innerHTML})}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(168),n(169),n(165)],i=function(t,e,n){"use strict";function r(t){return e.includes(t.nodeName)}function i(e){return t.includes(e.nodeName)}function o(t){return t.children.length>1?!1:1===t.children.length&&""!==t.textContent.trim()?!1:0===t.children.length?""===t.textContent.trim():o(t.children[0])}function s(t){return t.nodeType===Node.TEXT_NODE}function a(t){return s(t)&&""===t.data}function u(t){return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function c(t,e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING}function l(t,e){return function(n){return n.nodeType===t.ELEMENT_NODE&&n.className===e}}function f(t){return l(Node,"scribe-marker")(t)}function h(t){return l(Node,"caret-position")(t)}function p(t){var e=t.firstChild;return e&&"BR"!==e.nodeName?p(e):t}function d(t,e){return e.parentNode.insertBefore(t,e.nextSibling)}function v(t){return t.parentNode.removeChild(t)}function m(t,e,n){function r(t){return e===t}if(!r(t))for(var i=t.parentNode;i&&!r(i);){if(n(i))return i;i=i.parentNode}}function g(t){for(var e=n.List();t=t.nextSibling;)e=e.push(t);return e}function y(t,e){return t[0].parentNode.insertBefore(e,t[0]),t.forEach(function(t){e.appendChild(t)}),e}function _(t,e){for(;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)}function b(e){function r(t,e){return window.getComputedStyle(e).lineHeight===t.lineHeight}var i=n.List(e.querySelectorAll(t.map(function(t){return t+'[style*="line-height"]'}).join(",")));i=i.filter(r.bind(null,window.getComputedStyle(e)));var o=n.List();i.forEach(function(t){t.style.lineHeight=null,t.getAttribute("style")||t.removeAttribute("style"),"SPAN"===t.nodeName&&0===t.attributes.length&&(o=o.push(t))}),o.forEach(function(t){_(t.parentNode,t)})}return{isInlineElement:i,isBlockElement:r,isEmptyInlineElement:o,isText:s,isEmptyTextNode:a,isFragment:u,isBefore:c,isSelectionMarkerNode:f,isCaretPositionNode:h,firstDeepestChild:p,insertAfter:d,removeNode:v,getAncestor:m,nextSiblings:g,wrap:y,unwrap:_,removeChromeArtifacts:b,elementHasClass:l}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(165)],i=function(t){var e=t.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA");return e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(165)],i=function(t){var e=t.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO");return e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";function t(t){for(var e=document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1);e.nextNode();)if(e.currentNode&&(~["br"].indexOf(e.currentNode.nodeName.toLowerCase())||e.currentNode.length>0))return!0;return!1}return function(){return function(e){e.el.addEventListener("keydown",function(n){if(13===n.keyCode){var r=new e.api.Selection,i=r.range,o=r.getContaining(function(t){return"LI"===t.nodeName||/^(H[1-6])$/.test(t.nodeName)});o||(n.preventDefault(),e.transactionManager.run(function(){"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var n=document.createElement("br");i.insertNode(n),i.collapse(!1);var o=i.cloneRange();o.setEndAfter(e.el.lastChild,0);var s=o.cloneContents();if(!t(s)){var a=document.createElement("br");i.insertNode(a)}var u=i.cloneRange();u.setStartAfter(n,0),u.setEndAfter(n,0),r.selection.removeAllRanges(),r.selection.addRange(u)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(172),n(173)],i=function(t,e){"use strict";return{replaceNbspCharsFormatter:t,escapeHtmlCharactersFormatter:e}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=/(\s|&nbsp;)+/g;t.registerHTMLFormatter("export",function(t){return t.replace(e," ")})}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(174)],i=function(t){"use strict";return function(){return function(e){e.registerPlainTextFormatter(t)}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(148),n(175)],i=function(t,e){function n(n){return n=t(n),n&&i.test(n)?n.replace(r,e):n}var r=/[&<>"'`]/g,i=RegExp(r.source);return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){return e[t]}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(177),n(165)],i=function(t,e){"use strict";return function(){return function(n){var r=n.node;n.el.addEventListener("focus",function(){var t=new n.api.Selection;if(t.range){var e=n.allowsBlockElements()&&t.range.startContainer===n.el;if(e){var i=r.firstDeepestChild(n.el),o=t.range;o.setStart(i,0),o.setEnd(i,0),t.selection.removeAllRanges(),t.selection.addRange(o)}}}.bind(n));var i=function(){if(!n._skipFormatters){var t=new n.api.Selection,e=t.range,r=function(){e&&t.placeMarkers(),n.setHTML(n._htmlFormatterFactory.format(n.getHTML())),t.selectMarkers()}.bind(n);n.transactionManager.run(r)}delete n._skipFormatters}.bind(n);t(n.el,i),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode){var e=new n.api.Selection,r=e.range,i=e.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});if(i&&r.collapsed){var o=r.cloneRange();o.setEndAfter(i,0);var s=o.cloneContents();""===s.firstChild.textContent&&(t.preventDefault(),n.transactionManager.run(function(){var t=document.createElement("p"),n=document.createElement("br");t.appendChild(n),i.parentNode.insertBefore(t,i.nextElementSibling),r.setStart(t,0),r.setEnd(t,0),e.selection.removeAllRanges(),e.selection.addRange(r)}))}}}),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode||8===t.keyCode){var e=new n.api.Selection,r=e.range;if(r.collapsed){var i=e.getContaining(function(t){return"LI"===t.nodeName});if(i&&""===i.textContent.trim()){t.preventDefault();var o=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName}),s=n.getCommand("OL"===o.nodeName?"insertOrderedList":"insertUnorderedList");s.event=t,s.execute()}}}}),n.el.addEventListener("paste",function(t){if(t.clipboardData&&t.clipboardData.types.length>0)t.preventDefault(),e.List(t.clipboardData.types).includes("text/html")?n.insertHTML(t.clipboardData.getData("text/html")):n.insertPlainText(t.clipboardData.getData("text/plain"));else{var r=new n.api.Selection;r.placeMarkers();var i=document.createElement("div");document.body.appendChild(i),i.setAttribute("contenteditable",!0),i.focus(),setTimeout(function(){var t=i.innerHTML;i.parentNode.removeChild(i),r.selectMarkers(),n.el.focus(),n.insertHTML(t)},1)}})}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(167),n(178)],i=function(t,e){function n(e){return!t.isEmptyTextNode(e)&&!t.isSelectionMarkerNode(e)}function r(t){return t.some(function(t){return Array.prototype.some.call(t.addedNodes,n)||Array.prototype.some.call(t.removedNodes,n)})}function i(t,e){var n=!1,i=new s(function(t){if(!n&&r(t)){n=!0;try{e()}catch(i){throw i}finally{setTimeout(function(){n=!1},0)}}});return i.observe(t,{childList:!0,subtree:!0}),i}var o="object"==typeof window?window:void 0,s=e.determineMutationObserver(o);return i}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){return"undefined"==typeof t?function(){return{observe:function(){}}}:t.MutationObserver||t.WebKitMutationObserver||t.MozMutationObserver}return{determineMutationObserver:t}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){
var r,i;r=[n(180),n(181),n(182),n(183),n(184),n(185),n(186)],i=function(t,e,n,r,i,o,s){"use strict";return{commands:{bold:t,indent:e,insertHTML:n,insertList:r,outdent:i,createLink:o},events:s}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("bold");e.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});return t.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!n},t.commandPatches.bold=e}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";var t="\ufeff";return function(){return function(e){var n=new e.api.CommandPatch("indent");n.execute=function(n){e.transactionManager.run(function(){var r=new e.api.Selection,i=r.range,o="P"===i.commonAncestorContainer.nodeName&&"<br>"===i.commonAncestorContainer.innerHTML;if(o){var s=document.createTextNode(t);i.insertNode(s),i.setStart(s,0),i.setEnd(s,0),r.selection.removeAllRanges(),r.selection.addRange(i)}e.api.CommandPatch.prototype.execute.call(this,n),r=new e.api.Selection;var a=r.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});a&&a.removeAttribute("style")}.bind(this))},e.commandPatches.indent=n}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[],i=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("insertHTML"),n=t.node;e.execute=function(e){t.transactionManager.run(function(){t.api.CommandPatch.prototype.execute.call(this,e),n.removeChromeArtifacts(t.el)}.bind(this))},t.commandPatches.insertHTML=e}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){"use strict";return function(){return function(t){var e=t.node,n=function(e){t.api.CommandPatch.call(this,e)};n.prototype=Object.create(t.api.CommandPatch.prototype),n.prototype.constructor=n,n.prototype.execute=function(n){t.transactionManager.run(function(){if(t.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var r=new t.api.Selection,i=r.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName});if(i.nextElementSibling&&0===i.nextElementSibling.childNodes.length&&e.removeNode(i.nextElementSibling),i){var o=i.parentNode;o&&/^(H[1-6]|P)$/.test(o.nodeName)&&(r.placeMarkers(),e.insertAfter(i,o),r.selectMarkers(),2===o.childNodes.length&&e.isEmptyTextNode(o.firstChild)&&e.removeNode(o),0===o.childNodes.length&&e.removeNode(o))}e.removeChromeArtifacts(i)}}.bind(this))},n.prototype.queryState=function(){try{return t.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(e){if("NS_ERROR_UNEXPECTED"==e.name)return!1;throw e}},t.commandPatches.insertOrderedList=new n("insertOrderedList"),t.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=t.node,n=new t.api.CommandPatch("outdent");n.execute=function(){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range,i=n.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});if("BLOCKQUOTE"===r.commonAncestorContainer.nodeName){n.placeMarkers(),n.selectMarkers(!0);var o=r.cloneContents();i.parentNode.insertBefore(o,i),r.deleteContents(),n.selectMarkers(),""===i.textContent&&i.parentNode.removeChild(i)}else{var s=n.getContaining(function(t){return"P"===t.nodeName});if(s){var a=e.nextSiblings(s);if(a.size){for(var u=document.createElement(i.nodeName);a.size;)u.appendChild(a.first()),a=a.shift();i.parentNode.insertBefore(u,i.nextElementSibling)}n.placeMarkers(),i.parentNode.insertBefore(s,i.nextElementSibling),n.selectMarkers(),""===i.innerHTML&&i.parentNode.removeChild(i)}else t.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},t.commandPatches.outdent=n}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("createLink");t.commandPatches.createLink=e,e.execute=function(e){var n=new t.api.Selection;if(n.range.collapsed){var r=document.createElement("a");r.setAttribute("href",e),r.textContent=e,n.range.insertNode(r);var i=document.createRange();i.setStartBefore(r),i.setEndAfter(r),n.selection.removeAllRanges(),n.selection.addRange(i)}else t.api.CommandPatch.prototype.execute.call(this,e)}}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[],i=function(){"use strict";return function(){return function(t){var e=t.node;t.allowsBlockElements()&&t.el.addEventListener("keyup",function(n){if(8===n.keyCode||46===n.keyCode){var r=new t.api.Selection,i=r.getContaining(function(t){return"P"===t.nodeName});i&&t.transactionManager.run(function(){r.placeMarkers(),e.removeChromeArtifacts(i),r.selectMarkers()},!0)}})}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(188),n(189),n(190),n(191)],i=function(t,e,n,r){"use strict";return function(i){this.CommandPatch=t(i),this.Command=e(i),this.Selection=n(i),this.SimpleCommand=r(this,i)}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(t){function e(t){this.commandName=t}return e.prototype.execute=function(e){t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(t){function e(e){this.commandName=e,this.patch=t.commandPatches[this.commandName]}return e.prototype.execute=function(e){this.patch?this.patch.execute(e):t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(t){function e(){var t=document.createElement("em");return t.style.display="none",t.classList.add("scribe-marker"),t}function n(t,e){t.insertNode(e),e.nextSibling&&o.isEmptyTextNode(e.nextSibling)&&o.removeNode(e.nextSibling),e.previousSibling&&o.isEmptyTextNode(e.previousSibling)&&o.removeNode(e.previousSibling)}function r(){if(this.selection=i.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var t=this.selection.anchorNode,e=this.selection.anchorOffset,n=this.selection.focusNode,r=this.selection.focusOffset;if(t===n&&e>r){var s=e;e=r,r=s}else if(o.isBefore(n,t)){var a=t,u=e;t=n,e=r,n=a,r=u}this.range=document.createRange(),this.range.setStart(t,e),this.range.setEnd(n,r)}}var i=t.el.ownerDocument,o=t.node;if(i.compareDocumentPosition(t.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var s=t.el.parentNode;s&&o.isFragment(s);)s=s.parentNode;s&&s.getSelection&&(i=s)}return r.prototype.getContaining=function(e){var n=this.range;if(n){var r=this.range.commonAncestorContainer;return r&&t.el===r||!e(r)?o.getAncestor(r,t.el,e):r}},r.prototype.placeMarkers=function(){var r=this.range;if(r&&document.contains(t.el)&&t.el.contains(r.startContainer)&&t.el.contains(r.endContainer)){if(n(r.cloneRange(),e()),!r.collapsed){var i=r.cloneRange();i.collapse(!1),n(i,e())}this.selection.removeAllRanges(),this.selection.addRange(r)}},r.prototype.getMarkers=function(){return t.el.querySelectorAll("em.scribe-marker")},r.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(t){var e=t.parentNode;o.removeNode(t),e.normalize()})},r.prototype.selectMarkers=function(t){var e=this.getMarkers();if(e.length){var n=document.createRange();n.setStartBefore(e[0]),n.setEndAfter(e.length>=2?e[1]:e[0]),t||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(n)}},r.prototype.isCaretOnNewLine=function(){var t=this.getContaining(function(t){return"P"===t.nodeName});return!!t&&o.isEmptyInlineElement(t)},r}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(t,e){function n(t,n){e.api.Command.call(this,t),this._nodeName=n}return n.prototype=Object.create(t.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var t=new e.api.Selection;return e.api.Command.prototype.queryState.call(this)&&!!t.getContaining(function(t){return t.nodeName===this._nodeName}.bind(this))},n}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(193),n(194),n(195),n(196),n(197),n(198),n(199)],i=function(t,e,n,r,i,o,s){"use strict";return{indent:t,insertList:e,outdent:n,redo:r,subscript:i,superscript:o,undo:s}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("indent");e.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!n},t.commands.indent=e}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(165)],i=function(t){"use strict";return function(){return function(e){var n=e.node,r=function(t){e.api.Command.call(this,t)};r.prototype=Object.create(e.api.Command.prototype),r.prototype.constructor=r,r.prototype.execute=function(r){function i(t){if(t.size){for(var e=document.createElement(a.nodeName);t.size;)e.appendChild(t.first()),t=t.shift();a.parentNode.insertBefore(e,a.nextElementSibling)}}if(this.queryState()){var o=new e.api.Selection,s=o.range,a=o.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName}),u=o.getContaining(function(t){return"LI"===t.nodeName});e.transactionManager.run(function(){if(u){var e=n.nextSiblings(u);i(e),o.placeMarkers();var r=document.createElement("p");r.innerHTML=u.innerHTML,a.parentNode.insertBefore(r,a.nextElementSibling),u.parentNode.removeChild(u)}else{var c=t.List(a.querySelectorAll("li")).filter(function(t){return s.intersectsNode(t)}),l=c.last(),f=n.nextSiblings(l);i(f),o.placeMarkers();var h=document.createDocumentFragment();c.forEach(function(t){var e=document.createElement("p");e.innerHTML=t.innerHTML,h.appendChild(e)}),a.parentNode.insertBefore(h,a.nextElementSibling),c.forEach(function(t){t.parentNode.removeChild(t)})}0===a.childNodes.length&&a.parentNode.removeChild(a),o.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,r)},r.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new r("insertOrderedList"),e.commands.insertUnorderedList=new r("insertUnorderedList")}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("outdent");e.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!n},t.commands.outdent=e}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("redo");e.execute=function(){t.undoManager.redo()},e.queryEnabled=function(){return t.undoManager.position>0},t.commands.redo=e,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){t.shiftKey&&(t.metaKey||t.ctrlKey)&&90===t.keyCode&&(t.preventDefault(),e.execute())})}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("subscript");t.commands.subscript=e}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("superscript");t.commands.superscript=e}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("undo");e.execute=function(){t.undoManager.undo()},e.queryEnabled=function(){return t.undoManager.position<t.undoManager.length},t.commands.undo=e,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){t.shiftKey||!t.metaKey&&!t.ctrlKey||90!==t.keyCode||(t.preventDefault(),e.execute())})}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(165)],i=function(t){"use strict";function e(e,n){this._stack=t.List(),this._limit=e,this._fireEvent="undefined"!=typeof CustomEvent&&n&&n.dispatchEvent,this._ush=n,this.position=0,this.length=0}return e.prototype.transact=function(e,n){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");e.execute(),this.position>0&&this.clearRedo();var r;n&&this.length?(r=this._stack.first().push(e),this._stack=this._stack.shift().unshift(r)):(r=t.List.of(e),this._stack=this._stack.unshift(r),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",r)},e.prototype.undo=function(){if(!(this.position>=this.length)){for(var t=this._stack.get(this.position),e=t.size;e--;)t.get(e).undo();this.position++,this._dispatch("undo",t)}},e.prototype.redo=function(){if(0!==this.position){this.position--;for(var t=this._stack.get(this.position),e=0;e<t.size;e++)t.get(e).redo();this._dispatch("redo",t)}},e.prototype.item=function(t){return t>=0&&t<this.length?this._stack.get(t).toArray():null},e.prototype.clearUndo=function(t){this._stack=this._stack.take(void 0!==t?t:this.position),this.length=this._stack.size},e.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},e.prototype._dispatch=function(t,e){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(t,{detail:{transactions:e.toArray()},bubbles:!0,cancelable:!1}))},e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(165)],i=function(t){"use strict";function e(){this._listeners={}}return e.prototype.on=function(e,n){var r=this._listeners[e]||t.Set();this._listeners[e]=r.add(n)},e.prototype.off=function(e,n){var r=this._listeners[e]||t.Set();n?this._listeners[e]=r["delete"](n):this._listeners[e]=r.clear()},e.prototype.trigger=function(e,n){for(var r=e.split(":");r.length;){var i=r.join(":"),o=this._listeners[i]||t.Set();o.forEach(function(t){t.apply(null,n)}),r.splice(r.length-1,1)}},e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(203)],i=function(t){function e(e){var n=e||{};return n.defaultPlugins&&(n.defaultPlugins=n.defaultPlugins.filter(i(a.defaultPlugins))),n.defaultFormatters&&(n.defaultFormatters=n.defaultFormatters.filter(i(a.defaultFormatters))),Object.freeze(t(n,a))}function n(t){return function(e,n){return e===t?-1:n===t?1:0}}function r(t){return function(e){return-1!==(t?o:s).indexOf(e)}}function i(t){return function(e){return-1!==t.indexOf(e)}}var o=["setRootPElement","enforcePElements","ensureSelectableContainers"],s=["inlineElementsMode"],a={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:o.concat(s),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:a,checkOptions:e,sortByPlugin:n,filterByBlockLevelMode:r,filterByPluginExists:i}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(204),n(141),n(205)],i=function(t,e,n){function r(r){if(null==r)return r;var o=t(arguments);return o.push(n),e.apply(i,o)}var i;return r}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t,e){return"undefined"==typeof t?e:t}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){t.registerPlainTextFormatter(function(t){return t.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("createLink");e.nodeName="A",e.execute=function(){var e=new t.api.Selection,n=e.range,r=e.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this)),i=r?r.href:"",o=window.prompt("Enter a link.",i);if(r&&(n.selectNode(r),e.selection.removeAllRanges(),e.selection.addRange(n)),o){var s=/^https?\:\/\//,a=/^mailto\:/;if(!s.test(o)&&!a.test(o))if(/@/.test(o)){var u=window.confirm("The URL you entered appears to be an email address. Do you want to add the required \u201cmailto:\u201d prefix?");u&&(o="mailto:"+o)}else{var c=window.confirm("The URL you entered appears to be a link. Do you want to add the required \u201chttp://\u201d prefix?");c&&(o="http://"+o)}t.api.SimpleCommand.prototype.execute.call(this,o)}},e.queryState=function(){var e=new t.api.Selection;return!!e.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this))},t.commands.linkPrompt=e}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(209),n(210),n(222)],i=function(t,e,n){"use strict";return function(r){var i=e(n(r),{tags:{em:{"class":"scribe-marker"},br:{}}});return function(e){var n=new t(i);e.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;!function(o,s){r=s,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i))}(this,function(){function t(t){var e=t.tags,n=Object.keys(e),r=n.map(function(t){return typeof e[t]}).every(function(t){return"object"===t||"boolean"===t||"function"===t});if(!r)throw new Error("The configuration was invalid");this.config=t}function e(t){return-1!==a.indexOf(t.nodeName)}function n(t){return-1!==u.indexOf(t.nodeName)}function r(t){return document.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function i(t,e,n){return"function"==typeof t.tags[e]?t.tags[e](n):t.tags[e]}function o(t,e){return"undefined"==typeof e?!0:"boolean"==typeof e?!e:!1}function s(t,e,n){var r=t.name.toLowerCase();return e===!0?!1:"function"==typeof e[r]?!e[r](t.value,n):"undefined"==typeof e[r]?!0:e[r]===!1?!0:"string"==typeof e[r]?e[r]!==t.value:!1}var a=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],u=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return t.prototype.clean=function(t){var e=document.createElement("div");return e.innerHTML=t,this._sanitize(e),e.innerHTML},t.prototype._sanitize=function(t){var a=r(t),u=a.firstChild();if(u)do if(!u._sanitized)if(u.nodeType!==Node.TEXT_NODE){if(u.nodeType===Node.COMMENT_NODE){t.removeChild(u),this._sanitize(t);break}var c,l=n(u);l&&(c=Array.prototype.some.call(u.childNodes,e));var f=!!t.parentNode,h=e(t)&&e(u)&&f,p=u.nodeName.toLowerCase(),d=i(this.config,p,u),v=l&&c;if(v||o(u,d)||!this.config.keepNestedBlockElements&&h){if("SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName)for(;u.childNodes.length>0;)t.insertBefore(u.childNodes[0],u);t.removeChild(u),this._sanitize(t);break}for(var m=0;m<u.attributes.length;m+=1){var g=u.attributes[m];s(g,d,u)&&(u.removeAttribute(g.name),m-=1)}this._sanitize(u),u._sanitized=!0}else if(""===u.data.trim()&&(u.previousElementSibling&&e(u.previousElementSibling)||u.nextElementSibling&&e(u.nextElementSibling))){t.removeChild(u),this._sanitize(t);break}while(u=a.nextSibling())},t})},function(t,e,n){var r,i;r=[n(211),n(158)],i=function(t,e){var n=e(t);return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(212),n(213),n(216),n(153),n(145),n(150),n(149),n(220)],i=function(t,e,n,r,i,o,s,a){function u(l,f,h,p,d){if(!o(l))return l;var v=i(f.length)&&(r(f)||a(f));return(v?t:e)(f,function(t,e,r){if(s(t))return p||(p=[]),d||(d=[]),n(l,r,e,u,h,p,d);var i=l[e],o=h?h(i,t,e,l,r):c,a="undefined"==typeof o;a&&(o=t),!v&&"undefined"==typeof o||!a&&(o===o?o===i:i!==i)||(l[e]=o)}),l}var c;return u}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(214),n(144)],i=function(t,e){function n(n,r){return t(n,r,e)}return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(215)],i=function(t){function e(e,n,r){for(var i=-1,o=t(e),s=r(e),a=s.length;++i<a;){var u=s[i];if(n(o[u],u,o)===!1)break}return e}return e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(150)],i=function(t){function e(e){return t(e)?e:Object(e)}return e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(204),n(152),n(153),n(145),n(217),n(220),n(221)],i=function(t,e,n,r,i,o,s){function a(a,c,l,f,h,p,d){for(var v=p.length,m=c[l];v--;)if(p[v]==m)return void(a[l]=d[v]);var g=a[l],y=h?h(g,m,l,a,c):u,_="undefined"==typeof y;_&&(y=m,r(m.length)&&(n(m)||o(m))?y=n(g)?g:g?t(g):[]:i(m)||e(m)?y=e(g)?s(g):i(g)?g:{}:_=!1),p.push(m),d.push(y),_?a[l]=f(y,m,h,p,d):(y===y?y!==g:g===g)&&(a[l]=y)}var u;return a}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(146),n(218)],i=function(t,e){var n="[object Object]",r=Object.prototype,i=r.toString,o=t(o=Object.getPrototypeOf)&&o,s=o?function(r){if(!r||i.call(r)!=n)return!1;var s=r.valueOf,a=t(s)&&(a=o(s))&&o(a);return a?r==a||o(r)==a:e(r)}:e;return s}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(219),n(149)],i=function(t,e){function n(n){var i;if(!e(n)||s.call(n)!=r||!o.call(n,"constructor")&&(i=n.constructor,"function"==typeof i&&!(i instanceof i)))return!1;var a;return t(n,function(t,e){a=e}),"undefined"==typeof a||o.call(n,a)}var r="[object Object]",i=Object.prototype,o=i.hasOwnProperty,s=i.toString;return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(214),n(155)],i=function(t,e){function n(n,r){return t(n,r,e)}return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(145),n(149)],i=function(t,e){function n(n){return e(n)&&t(n.length)&&T[I.call(n)]||!1}var r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",l="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",d="[object String]",v="[object WeakMap]",m="[object ArrayBuffer]",g="[object Float32Array]",y="[object Float64Array]",_="[object Int8Array]",b="[object Int16Array]",k="[object Int32Array]",w="[object Uint8Array]",x="[object Uint8ClampedArray]",E="[object Uint16Array]",S="[object Uint32Array]",T={};T[g]=T[y]=T[_]=T[b]=T[k]=T[w]=T[x]=T[E]=T[S]=!0,T[r]=T[i]=T[m]=T[o]=T[s]=T[a]=T[u]=T[c]=T[l]=T[f]=T[h]=T[p]=T[d]=T[v]=!1;var C=Object.prototype,I=C.toString;return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(143),n(155)],i=function(t,e){function n(n){return t(n,e(n))}return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(223),n(159)],i=function(t,e){function n(n,r,i){return r="function"==typeof r&&e(r,i,1),t(n,!0,r)}return n}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(204),n(212),n(143),n(213),n(227),n(224),n(228),n(153),n(150),n(144)],i=function(t,e,n,r,i,o,s,a,u,c){function l(h,p,d,v,g,y,b){var k;if(d&&(k=g?d(h,v,g):d(h)),"undefined"!=typeof k)return k;if(!u(h))return h;var w=a(h);if(w){if(k=i(h),!p)return t(h,k)}else{var x=j.call(h),E=x==m;if(x!=_&&x!=f&&(!E||g))return O[x]?o(h,x,p):g?h:{};if(k=s(E?{}:h),!p)return n(h,k,c(h))}y||(y=[]),b||(b=[]);for(var S=y.length;S--;)if(y[S]==h)return b[S];return y.push(h),b.push(k),(w?e:r)(h,function(t,e){k[e]=l(t,p,d,e,h,y,b)}),k}var f="[object Arguments]",h="[object Array]",p="[object Boolean]",d="[object Date]",v="[object Error]",m="[object Function]",g="[object Map]",y="[object Number]",_="[object Object]",b="[object RegExp]",k="[object Set]",w="[object String]",x="[object WeakMap]",E="[object ArrayBuffer]",S="[object Float32Array]",T="[object Float64Array]",C="[object Int8Array]",I="[object Int16Array]",A="[object Int32Array]",L="[object Uint8Array]",M="[object Uint8ClampedArray]",B="[object Uint16Array]",D="[object Uint32Array]",O={};O[f]=O[h]=O[E]=O[p]=O[d]=O[S]=O[T]=O[C]=O[I]=O[A]=O[y]=O[_]=O[b]=O[w]=O[L]=O[M]=O[B]=O[D]=!0,O[v]=O[m]=O[g]=O[k]=O[x]=!1;var N=Object.prototype,j=N.toString;return l}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(225)],i=function(t){function e(e,y,_){var b=e.constructor;switch(y){case a:return t(e);case n:case r:return new b(+e);case u:case c:case l:case f:case h:case p:case d:case v:case m:var k=e.buffer;return new b(_?t(k):k,e.byteOffset,e.length);case i:case s:return new b(e);case o:var w=new b(e.source,g.exec(e));w.lastIndex=e.lastIndex}return w}var n="[object Boolean]",r="[object Date]",i="[object Number]",o="[object RegExp]",s="[object String]",a="[object ArrayBuffer]",u="[object Float32Array]",c="[object Float64Array]",l="[object Int8Array]",f="[object Int16Array]",h="[object Int32Array]",p="[object Uint8Array]",d="[object Uint8ClampedArray]",v="[object Uint16Array]",m="[object Uint32Array]",g=/\w*$/;return e}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(226),n(146),n(157)],i=function(t,e,n){function r(t){return o.call(t,0)}var i=e(i=n.ArrayBuffer)&&i,o=e(o=i&&new i(0).slice)&&o,s=Math.floor,a=e(a=n.Uint8Array)&&a,u=function(){try{var t=e(t=n.Float64Array)&&t,r=new t(new i(10),0,1)&&t}catch(o){}return r}(),c=u?u.BYTES_PER_ELEMENT:0;return o||(r=i&&a?function(t){var e=t.byteLength,n=u?s(e/c):0,r=n*c,o=new i(e);if(n){var l=new u(o,0,n);l.set(new u(t,0,n))}return e!=r&&(l=new a(o,r),l.set(new a(t,r))),o}:t(null)),r}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){return function(){return t}}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var e=Object.prototype,n=e.hasOwnProperty;return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}return t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var r=n(230);t.exports={mixinName:"Textable",initializeTextable:function(){this.el.classList.add("st-block--textable")},focusAtEnd:function(){this.focus(),this.selectText()},selectText:function(){var t=document.createRange();this._scribe.allowsBlockElements()?t.setStartAfter(this._scribe.el.firstChild,0):t.selectNodeContents(this._scribe.el),t.collapse(!1);var e=new this._scribe.api.Selection;e.selection.removeAllRanges(),e.selection.addRange(t)},getScribeInnerContent:function(t){var e="";if(""!==this._scribe.getTextContent()){var n=document.createElement("div");return n.innerHTML=this.getTextBlockHTML(),e=n.firstChild.innerHTML||n.innerHTML,e.replace(/^[\s\uFEFF\xA0]+|$/g,"")}return e},getCaretPositionAtEnd:function(){return this.selectText(),r(this._scribe.el)},appendContent:function(t,e){e=e||{};var n=this.getCaretPositionAtEnd(),i=this.getScribeInnerContent();""!==i&&(t=i+t),""===t&&(t="<br>"),this.setTextBlockHTML(t),this.focus(),e.keepCaretPosition&&0!==n.start&&0!==n.end&&r(this._scribe.el,{start:n.start,end:n.end})}}},function(t,e,n){function r(t,e){if(1==arguments.length){if(!s.rangeCount)return;var n={},r=s.getRangeAt(0),a=r.cloneRange();return a.selectNodeContents(t),a.setEnd(r.endContainer,r.endOffset),n.end=a.toString().length,a.setStart(r.startContainer,r.startOffset),n.start=n.end-a.toString().length,n.atStart=0===a.startOffset,n}for(var u,c,l=e.end&&e.end!==e.start,f=0,r=document.createRange(),h=o(t).select(Node.TEXT_NODE).revisit(!1),p=e.start>t.textContent.length?t.textContent.length:e.start,d=e.end>t.textContent.length?t.textContent.length:e.end,v=e.atStart;u=h.next();){var m=f;f+=u.textContent.length;var g=v?f>p:f>=p;if(!c&&g&&(c=!0,r.setStart(u,p-m),!l)){r.collapse(!0),i(t,r);break}if(l&&f>=d){r.setEnd(u,d-m),i(t,r);break}}}function i(t,e){t.focus(),s.removeAllRanges(),s.addRange(e)}var o=n(231),s=window.getSelection();t.exports=r},function(t,e,n){function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.node=this.start=this.peeked=t,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],t&&this.higher(t))throw new Error("root must be a parent or ancestor to node")}function i(t,e){var n="nextSibling"==t;return function(r,i,s){r=this.compile(r),i=i&&i>0?i:1;for(var a=this.node,u=this.closingTag,c=this._revisit;a;){if(o(n,u)&&a[e])a=a[e],u=!n;else if(1==a.nodeType&&!a[e]&&o(n,u)){if(u=n,!c)continue}else if(a[t])a=a[t],u=!n;else if(a=a.parentNode,u=n,!c)continue;if(!a||this.higher(a,this.root))break;if(r(a)&&this.selects(a,s)&&this.rejects(a,s)){if(--i)continue;return s||(this.node=a),this.closingTag=u,a}}return null}}var o,s;try{o=n(232)}catch(a){o=n(232)}try{s=n(233)}catch(a){s=n(233)}t.exports=r,r.prototype.reset=function(t){return this.node=t||this.start,this},r.prototype.revisit=function(t){return this._revisit=void 0==t?!0:t,this},r.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},r.prototype.atOpening=function(){return!this.closingTag},r.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},r.prototype.atClosing=function(){return this.closingTag},r.prototype.next=i("nextSibling","firstChild"),r.prototype.previous=r.prototype.prev=i("previousSibling","lastChild"),r.prototype.select=function(t){return t=this.compile(t),this._selects.push(t),this},r.prototype.selects=function(t,e){var n=this._selects,r=n.length;if(!r)return!0;for(var i=0;r>i;i++)if(n[i].call(this,t,e))return!0;return!1},r.prototype.reject=function(t){return t=this.compile(t),this._rejects.push(t),this},r.prototype.rejects=function(t,e){var n=this._rejects,r=n.length;if(!r)return!0;for(var i=0;r>i;i++)if(n[i].call(this,t,e))return!1;return!0},r.prototype.higher=function(t){var e=this.root;if(!e)return!1;for(t=t.parentNode;t&&t!=e;)t=t.parentNode;return t!=e},r.prototype.compile=function(t){switch(typeof t){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+s(t,"node."));case"function":return t;default:return function(){return!0}}},r.prototype.peak=r.prototype.peek=function(t,e){return 1==arguments.length&&(e=t,t=!0),e=void 0==e?1:e,e?e>0?this.next(t,e,!0):this.prev(t,Math.abs(e),!0):this.node},r.prototype.use=function(t){return t(this),this}},function(t,e){function n(t,e){return!t!=!e}t.exports=n},function(t,e){function n(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(s,"").match(/[a-zA-Z_]\w*/g)||[]}function r(t,e,n){var r=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return t.replace(r,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}function i(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}function o(t){return function(e){return t+e}}var s=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,e){var s=i(n(t));return e&&"string"==typeof e&&(e=o(e)),e?r(t,s,e):s}},function(t,e,n){"use strict";var r=n(2)["default"],i=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n"),o=function(t,e){this.mediator=e,this.block=t,this._ensureElement(),this._bindFunctions(),this.initialize()};r(o.prototype,n(235),n(236),{total_blocks:0,bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"active",initialize:function(){this.el.insertAdjacentHTML("beforeend",i),this.select=this.$(".st-block-positioner__select")[0],this.select.addEventListener("change",this.onSelectChange),this.mediator.on("block:countUpdate",this.onBlockCountChange)},onBlockCountChange:function(t){t!==this.total_blocks&&(this.total_blocks=t,this.renderPositionList())},onSelectChange:function(){var t=this.select.value;0!==t&&(this.mediator.trigger("block:changePosition",this.block,t,1===t?"before":"after"),
this.toggle())},renderPositionList:function(){for(var t="<option value='0'>"+i18n.t("general:position")+"</option>",e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.select.innerHTML=t},toggle:function(){this.select.value=0,this.el.classList.toggle(this.visibleClass)},show:function(){this.el.classList.add(this.visibleClass)},hide:function(){this.el.classList.remove(this.visibleClass)}}),t.exports=o},function(t,e){"use strict";t.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(t){this[t]=this[t].bind(this)},this)}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(69);t.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.el.querySelectorAll(t)},render:function(){return this},destroy:function(){i.isUndefined(this.stopListening)||this.stopListening(),o.remove(this.el)},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var t=r({},i.result(this,"attributes"));this.id&&(t.id=this.id),this.className&&(t["class"]=this.className);var e=o.createElement(this.tagName,t);this._setElement(e)}},_setElement:function(t){return this.el=t,this}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(133),o=n(75),s=n(69),a=n(68),u=function(t,e){this.block=t,this.blockID=this.block.getAttribute("id"),this.mediator=e,this._ensureElement(),this._bindFunctions(),this.initialize()};r(u.prototype,n(235),n(236),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn__reorder",tagName:"a",attributes:function(){return{html:'<svg role="img" class="st-icon">\n                 <use xlink:href="'+a.defaults.iconUrl+'#move"/>\n               </svg>',draggable:"true","data-icon":"move"}},initialize:function(){this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("dragstart",this.onDragStart),this.el.addEventListener("dragend",this.onDragEnd),i.dropArea(this.block),this.block.addEventListener("drop",this.onDrop)},blockId:function(){return this.block.getAttribute("id")},onMouseDown:function(){o.trigger("block:reorder:down")},onDrop:function(t){t.preventDefault();var e=this.block,n=t.dataTransfer.getData("text/plain"),r=document.querySelector("#"+n);e.id!==n&&s.insertAfter(r,e),this.mediator.trigger("block:rerender",n),o.trigger("block:reorder:dropped",n)},onDragStart:function(t){var e=this.block;this.dragEl=e.cloneNode(!0),this.dragEl.classList.add("st-drag-element"),this.dragEl.style.top=e.offsetTop+"px",this.dragEl.style.left=e.offsetLeft+"px",e.parentNode.appendChild(this.dragEl),t.dataTransfer.setDragImage(this.dragEl,0,0),t.dataTransfer.setData("text/plain",this.blockId()),this.mediator.trigger("block-controls:hide"),o.trigger("block:reorder:dragstart"),e.classList.add("st-block--dragging")},onDragEnd:function(t){o.trigger("block:reorder:dragend"),this.block.classList.remove("st-block--dragging"),this.dragEl.parentNode.removeChild(this.dragEl)},render:function(){return this}}),t.exports=u},function(t,e,n){"use strict";var r=n(2)["default"],i=n(68),o=function(){this._ensureElement(),this._bindFunctions()};r(o.prototype,n(235),n(236),{tagName:"a",className:"st-block-ui-btn__delete",attributes:{html:function(){return'<svg role="img" class="st-icon">\n                   <use xlink:href="'+i.defaults.iconUrl+'#cross"/>\n                 </svg>'},"data-icon":"close"}}),t.exports=o},function(t,e,n){"use strict";var r=n(34),i=n(29),o=function(t){var e=t.getAttribute("data-st-name")||t.getAttribute("name");return e||(e="Field"),i.capitalize(e)};t.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");Array.prototype.forEach.call(t,function(t,e){this.validateField(t)}.bind(this)),this.validations.forEach(this.runValidator,this),this.el.classList.toggle("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){var e=t.getAttribute("contenteditable")?t.textContent:t.value;0===e.length&&this.setError(t,i18n.t("errors:block_empty",{name:o(t)}))},runValidator:function(t){r.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var n=this.addMessage(e,"st-msg--error");t.classList.add("st-error"),this.errors.push({field:t,reason:e,msg:n})},resetErrors:function(){this.errors.forEach(function(t){t.field.classList.remove("st-error"),t.msg.remove()}),this.messages.classList.remove("st-block__messages--is-visible"),this.errors=[]}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(29),s=n(75);t.exports={blockStorage:{},createStore:function(t){this.blockStorage={type:o.underscored(this.type),data:t||{}}},save:function(){var t=this._serializeData();i.isEmpty(t)||this.setData(t)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(t){o.log("Setting data for block "+this.blockID),r(this.blockStorage.data,t||{})},setAndLoadData:function(t){this.setData(t),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){o.log("loadData for "+this.blockID),s.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){o.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){i.isEmpty(this._getData())||this.beforeLoadingData()}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(30)["default"],o=n(34),s=n(29),a=n(68),u=n(75),c=n(242),l=n(69),f=["convertToMarkdown","convertFromMarkdown","formatBar"],h=function(t){this.options=t.options,this.blockOptions=f.reduce(function(e,n){return e[n]=t.options[n],e},{}),this.instance_scope=t.ID,this.mediator=t.mediator,this.wrapper=t.wrapper,this.blocks=[],this.blockCounts={},this.blockTypes=[],this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};r(h.prototype,n(235),n(268),n(73),{eventNamespace:"block",mediatedEvents:{create:"createBlock",remove:"removeBlock",rerender:"rerenderBlock",replace:"replaceBlock",focusPrevious:"focusPreviousBlock",focusNext:"focusNextBlock"},initialize:function(){},createBlock:function(t,e,n){if(t=s.classify(t),this.canCreateBlock(t)){var r=new c[t](e,this.instance_scope,this.mediator,this.blockOptions);this.blocks.push(r),this._incrementBlockTypeCount(t),this.renderBlock(r,n),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),u.trigger(e?"block:create:existing":"block:create:new",r),s.log("Block created of type "+t)}},removeBlock:function(t,e){e=r({transposeContent:!1,focusOnPrevious:!1},e);var n=this.findBlockById(t),i=s.classify(n.type),o=this.getPreviousBlock(n),a=this.getNextBlock(n);if(e.transposeContent&&n.textable){if(!o&&1===this.blocks.length)return;if(o&&o.textable)o.appendContent(n.getScribeInnerContent(),{keepCaretPosition:!0});else{if(""!==n.getScribeInnerContent())return;o?o.focusAtEnd():a&&a.focus()}}this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(t){return t.blockID!==n.blockID}),n.remove(),e.focusOnPrevious&&o&&o.focusAtEnd(),this._decrementBlockTypeCount(i),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),u.trigger("block:remove",t)},replaceBlock:function(t,e,n){var r=this.findBlockById(t.id);this.createBlock(e,n||null,t),this.removeBlock(t.id),r.remove()},renderBlock:function(t,e){e?l.insertAfter(t.render().el,e):this.wrapper.appendChild(t.render().el),t.trigger("onRender")},rerenderBlock:function(t){var e=this.findBlockById(t);o.isUndefined(e)||e.isEmpty()||!e.drop_options.re_render_on_reorder||e.beforeLoadingData()},getPreviousBlock:function(t){var e=this.getBlockPosition(t.el);if(!(1>e)){var n=this.wrapper.querySelectorAll(".st-block")[e-1];return this.findBlockById(n.getAttribute("id"))}},getNextBlock:function(t){var e=this.getBlockPosition(t.el);if(!(0>e||e>=this.blocks.length-1))return this.findBlockById(this.wrapper.querySelectorAll(".st-block")[e+1].getAttribute("id"))},getBlockPosition:function(t){return Array.prototype.indexOf.call(this.wrapper.querySelectorAll(".st-block"),t)},focusPreviousBlock:function(t){var e=this.findBlockById(t);if(e.textable){var n=this.getPreviousBlock(e);n&&n.textable&&n.focusAtEnd()}},focusNextBlock:function(t){var e=this.findBlockById(t);if(e&&e.textable){var n=this.getNextBlock(e);n&&n.textable&&n.focus()}},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(t){return this.blockLimitReached()?(s.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(t)?this.canAddBlockType(t)?!0:(s.log("Block Limit reached for type "+t),!1):(s.log("Block type not available "+t),!1)},validateBlockTypesExist:function(t){return a.skipValidation||!t?!1:void(this.required||[]).forEach(function(t,e){if(this.isBlockTypeAvailable(t))if(0===this._getBlockTypeCount(t))s.log("Failed validation on required block type "+t),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:t})});else{var n=this.getBlocksByType(t).filter(function(t){return!t.isEmpty()});if(n.length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:t})}),s.log("A required block type "+t+" is empty")}},this)},findBlockById:function(t){return this.blocks.find(function(e){return e.blockID===t})},getBlocksByType:function(t){return this.blocks.filter(function(e){return s.classify(e.type)===t})},getBlocksByIDs:function(t){return this.blocks.filter(function(e){return t.includes(e.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(t){return this.blockTypes.includes(t)},canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_setBlocksTypes:function(){this.blockTypes=this.options.blockTypes||i(c)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!o.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=o.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_decrementBlockTypeCount:function(t){this.blockCounts[t]=o.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]-1},_getBlockTypeCount:function(t){return o.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(t){return this.isBlockTypeAvailable(t)?parseInt(o.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10):0}}),t.exports=h},function(t,e,n){"use strict";t.exports={Text:n(243),Quote:n(261),Image:n(262),Heading:n(263),List:n(264),Tweet:n(266),Video:n(267)}},function(t,e,n){"use strict";var r=n(244),i=n(253),o=n(254),s=n(258),a=n(259),u=n(260);t.exports=r.extend({type:"text",editorHTML:'<div class="st-text-block" contenteditable="true"></div>',icon_name:"text",textable:!0,toolbarEnabled:!1,configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.use(new u(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},scribeOptions:{allowBlockElements:!0,tags:{p:!0}},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.focus(),this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",this.isEmpty())},isEmpty:function(){return""===this._scribe.getTextContent()}})},function(t,e,n){"use strict";var r=n(70)["default"],i=n(2)["default"],o=n(34),s=n(138),a=n(68),u=n(29),c=n(69),l=n(131),f=n(128),h=n(245),p=n(237),d=n(238),v=n(234),m=n(75),g=n(251),y=n(252),_=function(t,e,n,r){h.apply(this,arguments)};_.prototype=r(h.prototype),_.prototype.constructor=_,i(_.prototype,h.fn,n(239),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender","onDeleteConfirm","onPositionerClick"],className:"st-block",attributes:function(){return i(h.fn.attributes.call(this))},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:o.isFunction(this.title)?this.title():this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable","textable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,multi_editable:!1,textable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,supressKeyListeners:!1,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(o.isObject(t)){var e="initialize"+t.mixinName;o.isUndefined(this[e])&&(i(this,t),this[e]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.editor=this.inner.children[0],this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(t){if(this[t]){var e=f[u.classify(t)];!o.isUndefined(e.requireInputs)&&e.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var t=document.createElement("div");t.classList.add("st-block__inputs"),this.inner.appendChild(t),this.inputs=t}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(t){this[t]&&this.withMixin(f[u.classify(t)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),c.remove(this.el)},loading:function(){o.isUndefined(this.spinner)||this.ready(),this.spinner=new g(a.defaults.spinner),this.spinner.spin(this.el),this.el.classList.add("st--is-loading")},ready:function(){this.el.classList.remove("st--is-loading"),o.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){u.log("toData for "+this.blockID);var t={};this.hasTextBlock()&&(t.text=this.getTextBlockHTML(),t.format="html");var e=['input:not([class="st-paste-block"])','textarea:not([class="st-paste-block"])','select:not([class="st-paste-block"])','button:not([class="st-paste-block"])'].join(",");return this.$(e).length>0&&Array.prototype.forEach.call(this.$("input, textarea, select, button"),function(e){e.getAttribute("name")&&(t[e.getAttribute("name")]=e.value)}),t},focus:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.focus()})},focusAtEnd:function(){this.focus()},blur:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.blur()})},onFocus:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("focus",t._onFocus)})},onBlur:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("blur",t._onBlur)})},_onFocus:function(){this.trigger("blockFocus",this.el)},_onBlur:function(){},onBlockRender:function(){this.focus()},onDrop:function(t){},onDeleteConfirm:function(t){t.preventDefault(),this.mediator.trigger("block:remove",this.blockID,{focusOnPrevious:!0})},addDeleteControls:function(){var t=this,e=function(e){e.preventDefault(),t.deleteEl.classList.remove("active")};this.ui.insertAdjacentHTML("beforeend",y),l.delegate(this.el,".js-st-block-confirm-delete","click",this.onDeleteConfirm),l.delegate(this.el,".js-st-block-deny-delete","click",e)},onDeleteClick:function(t){return t.preventDefault(),t.stopPropagation(),this.isEmpty()?void this.onDeleteConfirm.call(this,new CustomEvent("click")):(this.deleteEl=this.el.querySelector(".st-block__ui-delete-controls"),void this.deleteEl.classList.toggle("active"))},onPositionerClick:function(t){t.preventDefault(),this.positioner.toggle()},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(c.show(this.editor),c.hide(this.inputs)),h.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(t){if(o.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return s.execTextBlockCommand(this._scribe,t)},queryTextBlockCommandState:function(t){if(o.isUndefined(this._scribe))throw"No Scribe instance found to query command";return s.queryTextBlockCommandState(this._scribe,t)},_handleContentPaste:function(t){setTimeout(this.onContentPasted.bind(this,t,t.currentTarget),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){this.addDeleteControls(),this.positioner=new v(this.el,this.mediator),this._withUIComponent(this.positioner,".st-block-ui-btn__reorder",this.onPositionerClick),this._withUIComponent(new p(this.el,this.mediator)),this._withUIComponent(new d,".st-block-ui-btn__delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var t=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(e){if(!o.isUndefined(e.keyCode)){var n=!1;l.delegate(t.el,".st-text-block","keyup",function(t){(17===t.which||224===t.which||91===t.which)&&(n=!1)}),l.delegate(t.el,".st-text-block","keydown",function(r){(17===r.which||224===r.which||91===r.which)&&(n=!0),r.which===e.keyCode&&n&&(r.preventDefault(),t.execTextBlockCommand(e.cmd))})}})},_initTextBlocks:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("keyup",t.getSelectionForFormatter),e.addEventListener("mouseup",t.getSelectionForFormatter),e.addEventListener("DOMNodeInserted",t.clearInsertedStyles)});var e=this.getTextBlock()[0];if(!o.isUndefined(e)&&o.isUndefined(this._scribe)){var n=o.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=s.initScribeInstance(e,this.scribeOptions,n)}},getSelectionForFormatter:function(){var t=this;setTimeout(function(){var e=window.getSelection(),n=e.toString().trim(),r="formatter:"+(""===n?"hide":"position");t.mediator.trigger(r,t),m.trigger(r,t)},1)},clearInsertedStyles:function(t){var e=t.target;o.isUndefined(e.tagName)&&(e=e.parentNode),e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return o.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(t){var e=this._scribe.setContent(t),n=this._scribe.node.firstDeepestChild(this._scribe.el);for("#text"===n.nodeName&&(n.textContent=u.leftTrim(n.textContent));this._scribe.el.firstChild&&""===this._scribe.el.firstChild.textContent;)this._scribe.el.removeChild(this._scribe.el.firstChild);for(;this._scribe.el.lastChild&&"BR"===this._scribe.el.lastChild.nodeName;)this._scribe.el.removeChild(this._scribe.el.lastChild);return e},isEmpty:function(){return o.isEmpty(this.getBlockData())}}),_.extend=n(250),t.exports=_},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(29),s=n(69),a=n(131),u=n(237),c=n(246),l=function(t,e,n,r){this.createStore(t),this.blockID=i.uniqueId("st-block-"),this.instanceID=e,this.mediator=n,this.options=r||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};r(l.prototype,n(235),n(73),n(236),n(240),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:c,attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return o.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=o.toSlug(this.type),this.blockCSSClass},type:"","class":function(){return o.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=i.result(this,"editorHTML");this.el.insertAdjacentHTML("beforeend",this.block_template(t)),this.inner=this.el.querySelector(".st-block__inner")},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.el.classList.add("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(t,e,n){this.ui.appendChild(t.render().el),e&&n&&a.delegate(this.ui,e,"click",n)},_initUI:function(){var t=s.createElement("div",{"class":"st-block__ui"});this.el.appendChild(t),this.ui=t,this._initUIComponents()},_initMessages:function(){var t=s.createElement("div",{"class":"st-block__messages"});this.inner.insertBefore(t,this.inner.firstChild),this.messages=t},addMessage:function(t,e){return t=s.createElement("span",{html:t,"class":"st-msg "+e}),this.messages.appendChild(t),this.messages.classList.add("st-block__messages--is-visible"),t},resetMessages:function(){this.messages.innerHTML="",this.messages.classList.remove("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new u(this.el))}}),l.fn=l.prototype,l.extend=n(250),t.exports=l},function(t,e,n){"use strict";var r=n(247),i=n(248),o=n(249);t.exports=function(t){return"\n    <div class='st-block__inner'>\n      "+t+"\n    </div>\n    "+o()+"\n    "+r()+"\n    "+i()+"\n  "}},function(t,e,n){"use strict";var r=n(68);t.exports=function(){return'\n    <div class="st-block-addition-top">\n      <div class="st-block-addition-top__button" type="button"></div>\n      <div class="st-block-addition-top__icon">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'+r.defaults.iconUrl+'#add-block"/>\n        </svg>\n      </div>\n    </div>\n  '}},function(t,e,n){"use strict";var r=n(68);t.exports=function(){return'\n    <button class="st-block-addition" type="button">\n      <span class="st-block-addition__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'+r.defaults.iconUrl+'#plus"/>\n        </svg>\n      </span>\n    </button>\n  '}},function(t,e,n){"use strict";var r=n(68);t.exports=function(){return'\n    <button class="st-block-replacer" type="button">\n      <span class="st-block-replacer__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'+r.defaults.iconUrl+'#add-block"/>\n        </svg>\n      </span>\n    </button>\n  '}},function(t,e,n){"use strict";var r=n(2)["default"];t.exports=function(t,e){var n,i=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},r(n,i,e);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,t&&r(n.prototype,t),n.__super__=i.prototype,n}},function(t,e,n){var r,i;!function(o,s){"object"==typeof t&&t.exports?t.exports=s():(r=s,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i)))}(this,function(){"use strict";function t(t,e){var n,r=document.createElement(t||"div");for(n in e)r[n]=e[n];return r}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,r){var i=["opacity",e,~~(100*t),n,r].join("-"),o=.01+n/r*100,s=Math.max(1-(1-t)/e*(100-o),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),u=a&&"-"+a+"-"||"";return h[i]||(l.insertRule("@"+u+"keyframes "+i+"{0%{opacity:"+s+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",l.cssRules.length),h[i]=1),i}function r(t,e){var n,r,i=t.style;if(e=e.charAt(0).toUpperCase()+e.slice(1),void 0!==i[e])return e;for(r=0;r<f.length;r++)if(n=f[r]+e,void 0!==i[n])return n}function i(t,e){for(var n in e)t.style[r(t,n)||n]=e[n];return t}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)void 0===t[r]&&(t[r]=n[r])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=o(t||{},a.defaults,p)}function u(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}l.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,r){function o(){return i(n("group",{coordsize:l+" "+l,coordorigin:-c+" "+-c}),{width:l,height:l})}function a(t,a,u){e(h,e(i(o(),{rotation:360/r.lines*t+"deg",left:~~a}),e(i(n("roundrect",{arcsize:r.corners}),{width:c,height:r.scale*r.width,left:r.scale*r.radius,top:-r.scale*r.width>>1,filter:u}),n("fill",{color:s(r.color,t),opacity:r.opacity}),n("stroke",{opacity:0}))))}var u,c=r.scale*(r.length+r.width),l=2*r.scale*c,f=-(r.width+r.length)*r.scale*2+"px",h=i(o(),{position:"absolute",top:f,left:f});if(r.shadow)for(u=1;u<=r.lines;u++)a(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=r.lines;u++)a(u);return e(t,h)},a.prototype.opacity=function(t,e,n,r){var i=t.firstChild;r=r.shadow&&r.lines||0,i&&e+r<i.childNodes.length&&(i=i.childNodes[e+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var c,l,f=["webkit","Moz","ms","O"],h={},p={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(a.defaults={},o(a.prototype,{spin:function(e){this.stop();var n=this,r=n.opts,o=n.el=t(null,{className:r.className});if(i(o,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),e&&e.insertBefore(o,e.firstChild||null),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!c){var s,a=0,u=(r.lines-1)*(1-r.direction)/2,l=r.fps,f=l/r.speed,h=(1-r.opacity)/(f*r.trail/100),p=f/r.lines;!function d(){a++;for(var t=0;t<r.lines;t++)s=Math.max(1-(a+(r.lines-t)*p)%f*h,r.opacity),n.opacity(o,t*r.direction+u,s,r);n.timeout=n.el&&setTimeout(d,~~(1e3/l))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(r,o){function a(e,n){return i(t(),{position:"absolute",width:o.scale*(o.length+o.width)+"px",height:o.scale*o.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.scale*o.radius+"px,0)",borderRadius:(o.corners*o.scale*o.width>>1)+"px"})}for(var u,l=0,f=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)u=i(t(),{position:"absolute",top:1+~(o.scale*o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:c&&n(o.opacity,o.trail,f+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(u,i(a("#000","0 0 4px #000"),{top:"2px"})),e(r,e(u,a(s(o.color,l),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}}),"undefined"!=typeof document){l=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var d=i(t("group"),{behavior:"url(#default#VML)"});!r(d,"transform")&&d.adj?u():c=r(d,"animation")}return a})},function(t,e){"use strict";t.exports='\n  <div class="st-block__ui-delete-controls">\n    <label class="st-block__delete-label">\n      '+i18n.t("general:delete")+"\n    </label>\n    <button class='st-block-ui__confirm js-st-block-confirm-delete' type=\"button\">\n      "+i18n.t("general:yes")+"\n    </button>\n    <button class='st-block-ui__confirm js-st-block-deny-delete' type=\"button\">\n      "+i18n.t("general:no")+"\n    </button>\n  </div>\n"},function(t,e,n){"use strict";var r=n(34),i=n(29);t.exports=function(t,e){var o=n(242);e=i.classify(e);var s=t,a="Text"===e;r.isUndefined(a)&&(a=!1),a&&(s="<p>"+s),s=s.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(t,e,n){return"<a href='"+n+"'>"+e.replace(/\n/g,"")+"</a>"}),s=i.reverse(i.reverse(s).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(t,e){return">i/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(t,e){return">b/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"})),s=s.replace(/^\> (.+)$/gm,"$1");var u;return o.hasOwnProperty(e)&&(u=o[e],!r.isUndefined(u.prototype.toHTML)&&r.isFunction(u.prototype.toHTML)&&(s=u.prototype.toHTML(s))),a&&(s=s.replace(/\n\s*\n/gm,"</p><p>"),s=s.replace(/\n/gm,"<br>")),s=s.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,""),s=s.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),a&&(s+="</p>"),s}},function(t,e,n){"use strict";var r=n(255)["default"],i=n(230),o=function(t){return function(e){var n=function(t){if(null!==t.firstChild){var e=t.firstChild.childNodes[0];e&&"#text"!==e.nodeName&&""===e.innerText&&t.firstChild.removeChild(e)}},o=function(t,e){var r=document.createElement("div");return e?r.appendChild(t.extractContents()):r.appendChild(t.cloneContents()),n(r),r.firstChild&&"#text"!==r.firstChild.nodeName&&(r=r.lastChild),r.innerHTML.trim()},s=function(){var t=new e.api.Selection,n=t.range.cloneRange();return n.setEndAfter(e.el.lastChild,0),n},a=function(){if(""===e.getTextContent())return!0;var t=new e.api.Selection,n=t.range.cloneRange();return n.setStartBefore(e.el.firstChild,0),""===o(n,!1)},u=function(){var t=new e.api.Selection,n=t.range.cloneRange();return n.selectNodeContents(e.el),n.toString().length},c=function(){var t=i(e.el);return u()===t.end&&t.start===t.end},l=function(){var i=document.createElement("div");if(i.appendChild(s().extractContents()),n(i),!e.allowsBlockElements()){var o=document.createElement("div");o.appendChild(i),i=o}if(i.childNodes.length>=1){var a,u=r(i.childNodes);u.reverse().forEach(function(e){""!==e.innerText&&(a={format:"html",text:e.innerHTML.trim()},t.mediator.trigger("block:create","Text",a,t.el))})}},f=!1;e.el.addEventListener("keydown",function(n){t.supressKeyListeners||(13!==n.keyCode||n.shiftKey?37!==n.keyCode&&38!==n.keyCode||!a()?8===n.keyCode&&a()?(n.preventDefault(),f=!0):39!==n.keyCode&&40!==n.keyCode||!c()||(n.preventDefault(),t.mediator.trigger("block:focusNext",t.blockID)):(n.preventDefault(),t.mediator.trigger("block:focusPrevious",t.blockID)):(n.preventDefault(),c()?(s().extractContents(),t.mediator.trigger("block:create","Text",null,t.el)):l(),e.allowsBlockElements()&&""===e.getTextContent()&&e.setContent("<p><br></p>")))}),e.el.addEventListener("keyup",function(e){t.supressKeyListeners||8===e.keyCode&&f&&(e.preventDefault(),t.mediator.trigger("block:remove",t.blockID,{transposeContent:!0}),f=!1)})}};t.exports=o},function(t,e,n){t.exports={"default":n(256),__esModule:!0}},function(t,e,n){n(86),n(257),t.exports=n(7).Array.from},function(t,e,n){"use strict";var r=n(8),i=n(5),o=n(12),s=n(113),a=n(114),u=n(115),c=n(116);i(i.S+i.F*!n(127)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,l,f=o(t),h="function"==typeof this?this:Array,p=arguments,d=p.length,v=d>1?p[1]:void 0,m=void 0!==v,g=0,y=c(f);if(m&&(v=r(v,d>2?p[2]:void 0,2)),void 0==y||h==Array&&a(y))for(e=u(f.length),n=new h(e);e>g;g++)n[g]=m?v(f[g],g):f[g];else for(l=y.call(f),n=new h;!(i=l.next()).done;g++)n[g]=m?s(l,v,[i.value,g],!0):i.value;return n.length=g,n}})},function(t,e,n){"use strict";var r=n(255)["default"],i=function(t){return function(e){var n=new e.api.CommandPatch("insertHTML");n.execute=function(n){var i=this;e.transactionManager.run(function(){e.api.CommandPatch.prototype.execute.call(i,n);var o=document.createElement("div");if(o.innerHTML=e.getContent(),o.childNodes.length>1){var s=r(o.childNodes);e.setContent(s.shift().innerHTML),s.reverse().forEach(function(e){var n={format:"html",text:e.innerHTML};t.mediator.trigger("block:create","Text",n,t.el)}),e.el.focus()}})},e.commandPatches.insertHTML=n}};t.exports=i},function(t,e){"use strict";var n=function(t){return function(e){var n=new e.api.Command("heading");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"heading"===t.type};var r=function(){return n.queryState()?"Text":"Heading"};n.execute=function(e){var n={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,r(),n)},e.commands.heading=n}};t.exports=n},function(t,e){"use strict";var n=function(t){return function(e){var n=new e.api.Command("quote");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"quote"===t.type};var r=function(){return n.queryState()?"Text":"Quote"};n.execute=function(e){var n={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,r(),n)},e.commands.quote=n}};t.exports=n},function(t,e,n){"use strict";var r=n(34),i=n(244),o=n(253),s=n(259),a=n(260),u=r.template(['<blockquote class="st-required st-text-block st-text-block--quote" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string js-cite-input" type="text" />'].join("\n"));
t.exports=i.extend({type:"quote",icon_name:"quote",textable:!0,toolbarEnabled:!1,editorHTML:function(){return u(this)},configureScribe:function(t){t.use(new s(this)),t.use(new a(this))},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(o(t.text,this.type)):this.setTextBlockHTML(t.text),t.cite&&(this.$(".js-cite-input")[0].value=t.cite)}})},function(t,e,n){"use strict";var r=n(69),i=n(244);t.exports=i.extend({type:"image",droppable:!0,uploadable:!0,icon_name:"image",loadData:function(t){this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:t.file.url}))},onDrop:function(t){var e=t.files[0],n="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),r.hide(this.inputs),this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:n.createObjectURL(e)})),r.show(this.editor),this.uploader(e,function(t){this.setData(t),this.ready()},function(t){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))}})},function(t,e,n){"use strict";var r=n(244),i=n(253),o=n(254),s=n(259),a=n(260);t.exports=r.extend({type:"heading",editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},textable:!0,toolbarEnabled:!1,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.focus(),this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",0===this._scribe.getTextContent().length)}})},function(t,e,n){"use strict";var r=n(244),i=n(253),o=n(265);t.exports=r.extend({type:"list",icon_name:"list",multi_editable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(t){t.use(new o(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.ul=this.inner.querySelector("ul")},loadData:function(t){var e=this;this.options.convertFromMarkdown&&"html"!==t.format&&(t=this.parseFromMarkdown(t.text)),t.listItems.length?t.listItems.forEach(function(t){e.addListItem(t.content)}):e.addListItem()},parseFromMarkdown:function(t){var e=t.replace(/^ - (.+)$/gm,"$1").split("\n");return e=e.filter(function(t){return t.length}).map(function(t){return{content:i(t,this.type)}}.bind(this)),{listItems:e,format:"html"}},_serializeData:function(){var t={format:"html",listItems:[]};return this.editorIds.forEach(function(e){var n={content:this.getTextEditor(e).scribe.getContent()};t.listItems.push(n)}.bind(this)),t},addListItemAfterCurrent:function(t){this.addListItem(t,this.getCurrentTextEditor())},addListItem:function(t,e){t=t||"","<br>"===t.trim()&&(t="");var n=this.newTextEditor(this.listItemEditorHTML,t);if(e&&this.ul.lastchild!==e.node){var r=e.node.nextSibling;this.ul.insertBefore(n.node,r);var i=this.editorIds.indexOf(e.id)+1;this.editorIds.splice(i,0,n.id)}else this.ul.appendChild(n.node),this.editorIds.push(n.id);!t&&this.focusOn(n)},focusOnNeighbor:function(t){var e=this.previousListItem()||this.nextListItem();e&&this.focusOn(e)},focusOn:function(t){var e,n=t.scribe,r=new n.api.Selection,i=n.el.lastChild;r.range&&(e=r.range.cloneRange()),t.el.focus(),e&&(e.setStartAfter(i,1),e.collapse(!1))},focusAtEnd:function(){var t=this.editorIds[this.editorIds.length-1];this.appendToTextEditor(t)},removeCurrentListItem:function(){if(1!==this.editorIds.length){var t=this.getCurrentTextEditor(),e=this.editorIds.indexOf(t.id);this.focusOnNeighbor(t),this.editorIds.splice(e,1),this.ul.removeChild(t.node),this.removeTextEditor(t.id)}},appendToCurrentItem:function(t){this.appendToTextEditor(this.getCurrentTextEditor().id,t)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t+1];return void 0!==e?this.getTextEditor(e):null},previousListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t-1];return void 0!==e?this.getTextEditor(e):null}})},function(t,e){"use strict";var n=function(t){return function(e){e.el.addEventListener("keydown",function(n){if(!t.supressKeyListeners){var r,i=function(t){var e=document.createElement("div");return e.appendChild(t.extractContents()),e.innerHTML},o=function(){var t=new e.api.Selection,n=t.range.cloneRange();return n.setEndAfter(e.el.lastChild,0),n},s=function(){var t=new e.api.Selection;return t.range.startOffset};13!==n.keyCode||n.shiftKey?8===n.keyCode&&0===s()?(n.preventDefault(),t.isLastListItem()?t.mediator.trigger("block:remove",t.blockID):(r=e.getContent(),t.removeCurrentListItem(),t.appendToCurrentItem(r))):46===n.keyCode:(n.preventDefault(),0===e.getTextContent().length?(t.removeCurrentListItem(),t.mediator.trigger("block:create","Text",null,t.el)):(r=i(o()),t.addListItemAfterCurrent(r)))}})}};t.exports=n},function(t,e,n){"use strict";var r=n(34),i=n(29),o=n(69),s=n(244),a=r.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>"].join("\n"));t.exports=s.extend({type:"tweet",icon_name:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},fetchUrl:function(t){return"/tweets/?tweet_id="+t},loadData:function(t){r.isUndefined(t.status_url)&&(t.status_url="");var e=this.inner.querySelector("iframe");o.remove(e),this.inner.insertAdjacentHTML("afterbegin",a(t));var n=o.createElement("script",{src:"//platform.twitter.com/widgets.js"});this.inner.appendChild(n)},onContentPasted:function(t){var e=t.target,n=e.value;this.handleTwitterDropPaste(n)},handleTwitterDropPaste:function(t){if(!this.validTweetUrl(t))return void i.log("Invalid Tweet URL");var e=t.match(/[^\/]+$/);r.isEmpty(e)||(this.loading(),e=e[0],this.fetch(this.fetchUrl(e),{dataType:"json"},this.onTweetSuccess,this.onTweetFail))},validTweetUrl:function(t){return i.isURI(t)&&-1!==t.indexOf("twitter")&&-1!==t.indexOf("status")},onTweetSuccess:function(t){var e={user:{profile_image_url:t.user.profile_image_url,profile_image_url_https:t.user.profile_image_url_https,screen_name:t.user.screen_name,name:t.user.name},id:t.id_str,text:t.text,created_at:t.created_at,entities:t.entities,status_url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str};this.setAndLoadData(e),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(t){var e=t.getData("text/plain");this.handleTwitterDropPaste(e)}})},function(t,e,n){"use strict";var r=n(34),i=n(29),o=n(244);t.exports=o.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",droppable:!0,pastable:!0,icon_name:"video",loadData:function(t){if(this.providers.hasOwnProperty(t.source)){var e=this.providers[t.source],n="file:"===window.location.protocol?"http:":window.location.protocol,i=e.square?"with-square-media":"with-sixteen-by-nine-media";this.editor.classList.add("st-block__editor--"+i),this.editor.innerHTML=r.template(e.html,{protocol:n,remote_id:t.remote_id,width:this.editor.style.width})}},onContentPasted:function(t){this.handleDropPaste(t.target.value)},matchVideoProvider:function(t,e,n){var i=t.regex.exec(n);return null==i||r.isUndefined(i[1])?{}:{source:e,remote_id:i[1]}},handleDropPaste:function(t){if(i.isURI(t))for(var e in this.providers)this.providers.hasOwnProperty(e)&&this.setAndLoadData(this.matchVideoProvider(this.providers[e],e,t))},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)}})},function(t,e,n){"use strict";var r=n(30)["default"];t.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){r(this.mediatedEvents).forEach(function(t){var e=this.mediatedEvents[t];t=this.eventNamespace?this.eventNamespace+":"+t:t,this.mediator.on(t,this[e].bind(this))},this)}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(68),s=n(69),a=n(131),u=n(270),c=function(t,e,n){this.editor=n,this.options=r({},o.defaults.formatBar,t||{}),this.commands=this.options.commands,this.mediator=e,this.isShown=!1,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};r(c.prototype,n(235),n(268),n(73),n(236),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){var t=this.commands.reduce(function(t,e){return t+=u(e)},"");this.el.insertAdjacentHTML("beforeend",t),a.delegate(this.el,".st-format-btn","mousedown",this.onFormatButtonClick)},hide:function(){this.block=void 0,this.isShown=!1,this.el.classList.remove("st-format-bar--is-ready"),s.remove(this.el)},show:function(){this.isShown||(this.isShown=!0,this.editor.outer.appendChild(this.el),this.el.classList.add("st-format-bar--is-ready"))},remove:function(){s.remove(this.el)},renderBySelection:function(t){this.block=t,this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var t=window.getSelection(),e=t.getRangeAt(0),n=e.getBoundingClientRect(),r={},i=this.editor.outer,o=i.getBoundingClientRect();r.top=n.top-o.top+"px",r.left=(n.left+n.right)/2-this.el.offsetWidth/2-o.left+"px",this.el.style.top=r.top,this.el.style.left=r.left},highlightSelectedButtons:function(){var t=this;[].forEach.call(this.el.querySelectorAll(".st-format-btn"),function(e){var n=e.getAttribute("data-cmd");e.classList.toggle("st-format-btn--is-active",t.block.queryTextBlockCommandState(n)),e=null})},onFormatButtonClick:function(t){if(t.preventDefault(),t.stopPropagation(),i.isUndefined(this.block))throw"Associated block not found";var e=t.currentTarget,n=e.getAttribute("data-cmd");return i.isUndefined(n)?!1:(this.block.execTextBlockCommand(n),this.highlightSelectedButtons(),document.activeElement.focus(),!1)}}),t.exports=c},function(t,e,n){"use strict";var r=n(68);t.exports=function(t){var e=t.name,n=(t.text,t.cmd),i=t.iconName;return'\n    <button type="button" class="st-format-btn st-format-btn--'+e+'" data-cmd="'+n+'">\n      <svg role="img" class="st-icon">\n        <use xlink:href="'+r.defaults.iconUrl+"#"+i+'"/>\n      </svg>\n    </button>\n  '}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(30)["default"],o=n(34),s=n(68),a=n(29),u=n(69),c=n(73),l=n(75),f=n(272),h=n(273),p=n(275),d=n(277),v=n(241),m=n(269),g=n(76),y=n(278),_=function(t){this.initialize(t)};r(_.prototype,n(235),n(73),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","blockLimitReached","blockOrderUpdated"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(t){return a.log("Init SirTrevor.Editor"),this.options=r({},s.defaults,t||{}),this.ID=o.uniqueId("st-editor-"),this._ensureAndSetElements()?(!o.isUndefined(this.options.onEditorRender)&&o.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=r({},c),this._bindFunctions(),s.instances.push(this),this.build(),void f.bindFormSubmit(this.form)):!1},build:function(){u.hide(this.el),this.errorHandler=new y(this.outer,this.mediator,this.options.errorsContainer),this.store=new g(this.el.value,this.mediator),this.blockManager=new v(this),this.blockAddition=p.create(this),this.BlockAdditionTop=d.create(this),this.blockControls=h.create(this),this.formatBar=new m(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:rerender",this.blockOrderUpdated),this.mediator.on("block:create",this.blockOrderUpdated),this.mediator.on("block:remove",this.blockOrderUpdated),this.mediator.on("block:replace",this.blockOrderUpdated),this.dataStore="Please use store.retrieve();",this._setEvents(),window.addEventListener("click",this.hideAllTheThings),document.body.addEventListener("keydown",this.disableBackButton),this.createBlocks(),this.wrapper.classList.add("st-ready"),o.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var t=this.store.retrieve();t.data.length>0?t.data.forEach(function(t){this.mediator.trigger("block:create",t.type,t.data)},this):this.options.defaultType!==!1&&this.mediator.trigger("block:create",this.options.defaultType,{})},destroy:function(){this.formatBar.destroy(),this.blockAddition.destroy(),this.blockControls.destroy(),this.blockManager.blocks.forEach(function(t){this.mediator.trigger("block:remove",t.blockID)},this),this.mediator.stopListening(),this.stopListening(),s.instances=s.instances.filter(function(t){return t.ID!==this.ID},this),window.removeEventListener("click",this.hideAllTheThings),document.body.removeEventListener("keydown",this.disableBackButton),this.store.reset(),u.replaceWith(this.outer,this.el)},reinitialize:function(t){this.destroy(),this.initialize(t||this.options)},blockLimitReached:function(t){this.wrapper.classList.toggle("st--block-limit-reached",t)},blockOrderUpdated:function(){var t=this.wrapper.querySelectorAll(".st-block")[0],e=!1;if(t){var n=this.blockManager.findBlockById(t.getAttribute("id"));e=n&&n.textable}this._toggleHideTopControls(e)},_toggleHideTopControls:function(t){this.wrapper.classList.toggle("st--hide-top-controls",t)},_setEvents:function(){i(this.events).forEach(function(t){l.on(t,this[this.events[t]],this)},this)},hideAllTheThings:function(t){this.blockControls.hide(),this.blockAddition.hide(),null===document.activeElement.getAttribute("contenteditable")&&this.formatBar.hide();var e=".st-block__ui-delete-controls";Array.prototype.forEach.call(this.wrapper.querySelectorAll(e),function(t){t.classList.remove("active")})},store:function(t,e){return a.log("The store method has been removed, please call store[methodName]"),this.store[t].call(this,e||{})},removeBlockDragOver:function(){var t=this.outer.querySelector(".st-drag-over");t&&t.classList.remove("st-drag-over")},changeBlockPosition:function(t,e){e-=1;var n=this.blockManager.getBlockPosition(t),r=this.wrapper.querySelectorAll(".st-block")[e];r&&r.getAttribute("id")!==t.getAttribute("id")&&(this.hideAllTheThings(),n>e?r.parentNode.insertBefore(t,r):u.insertAfter(t,r))},validateAndSaveBlock:function(t,e){if(!s.skipValidation&&e&&!t.valid())return this.mediator.trigger("errors:add",{text:o.result(t,"validationFailMsg")}),void a.log("Block "+t.blockID+" failed validation");if("text"!==t.type||!t.isEmpty()){var n=t.getData();a.log("Adding data for block "+t.blockID+" to block store:",n),this.store.addData(n)}},onFormSubmit:function(t){return t=t===!1?!1:!0,a.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(t),this.blockManager.validateBlockTypesExist(t),this.mediator.trigger("errors:render"),this.el.value=this.store.toString(),this.errorHandler.errors.length},disableBackButton:function(t){var e=t.target||t.srcElement;if(8===t.keyCode){if(e.getAttribute("contenteditable")||"INPUT"===e.tagName||"TEXTAREA"===e.tagName)return;t.preventDefault()}},validateBlocks:function(t){var e=this;Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block"),function(n,r){var i=e.blockManager.findBlockById(n.getAttribute("id"));o.isUndefined(i)||e.validateAndSaveBlock(i,t)})},findBlockById:function(t){return this.blockManager.findBlockById(t)},getBlocksByType:function(t){return this.blockManager.getBlocksByType(t)},getBlocksByIDs:function(t){return this.blockManager.getBlocksByIDs(t)},getBlockPosition:function(t){return a.log("This method has been moved to blockManager.getBlockPosition()"),this.blockManager.getBlockPosition(t)},_ensureAndSetElements:function(){if(o.isUndefined(this.options.el))return a.log("You must provide an el"),!1;this.el=this.options.el,this.form=u.getClosest(this.el,"form");var t=u.createElement("div",{id:this.ID,"class":"st-outer notranslate",dropzone:"copy link move"}),e=u.createElement("div",{"class":"st-blocks"});return u.wrap(u.wrap(this.el,t),e),this.outer=this.form.querySelector("#"+this.ID),this.wrapper=this.outer.querySelector(".st-blocks"),!0}}),t.exports=_},function(t,e,n){"use strict";var r=n(68),i=n(29),o=n(75),s=n(77),a=!1,u={bindFormSubmit:function(t){a||(new s(t),t.addEventListener("submit",this.onFormSubmit),a=!0)},onBeforeSubmit:function(t){var e=0;return r.instances.forEach(function(n,r){e+=n.onFormSubmit(t)}),i.log("Total errors: "+e),e},onFormSubmit:function(t){var e=u.onBeforeSubmit();e>0&&(o.trigger("onError"),t.preventDefault())}};t.exports=u},function(t,e,n){"use strict";function r(t,e){return e.reduce(function(e,n){return t.hasOwnProperty(n)&&t[n].prototype.toolbarEnabled?e+=a(t[n].prototype):e},"")}function i(t,e){var n=document.createElement("div");n.className="st-block-controls__buttons",n.innerHTML=r.apply(null,arguments);var i=document.createElement("div");return i.className="st-block-controls",i.appendChild(n),i}var o=n(242),s=n(131),a=n(274);t.exports.create=function(t){function e(e){t.mediator.trigger("block:replace",u.parentNode,this.getAttribute("data-type"))}function n(t){t.stopPropagation();var e=this.parentNode;e&&r()!==e&&(e.appendChild(u),e.classList.toggle("st-block--controls-active"))}function r(){var t=u.parentNode;if(t)return t.removeChild(u),t.classList.remove("st-block--controls-active"),t}function a(){t=null,u=null}var u=i(o,t.blockManager.blockTypes);return s.delegate(t.wrapper,".st-block-replacer","click",n),s.delegate(t.wrapper,".st-block-controls__button","click",e),{el:u,hide:r,destroy:a}}},function(t,e,n){"use strict";var r=n(68);t.exports=function(t){return'\n    <button class="st-block-controls__button" data-type="'+t.type+'" type="button">\n      <svg role="img" class="st-icon">\n        <use xlink:href="'+r.defaults.iconUrl+"#"+t.icon_name+'"/>\n      </svg>\n      '+t.title()+"\n    </button>\n  "}},function(t,e,n){"use strict";var r=n(133),i=n(75),o=n(69),s=n(131),a=n(276);t.exports.create=function(t){function e(e){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.id?this.parentNode.parentNode:this.parentNode)}function n(){}function u(){t=null}function c(e){e.preventDefault();var n=l,r=e.dataTransfer.getData("text/plain"),s=document.querySelector("#"+r);n.id!==r&&o.insertAfter(s,n),t.mediator.trigger("block:rerender",r),i.trigger("block:reorder:dropped",r)}t.wrapper.insertAdjacentHTML("beforeend",a());var l=t.wrapper.querySelector(".st-top-controls");return r.dropArea(l),l.addEventListener("drop",c),s.delegate(t.wrapper,".st-block-addition","click",e),{destroy:u,hide:n}}},function(t,e,n){"use strict";var r=n(248);t.exports=function(){return'\n    <div id="st_top" class="st-top-controls">\n      '+r()+"\n    </div>\n  "}},function(t,e,n){"use strict";var r=n(131);t.exports.create=function(t){function e(e){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.previousSibling)}function n(){}function i(){t=null}return r.delegate(t.wrapper,".st-block-addition-top__button","click",e),r.delegate(t.wrapper,".st-block-addition-top__icon","click",e),{destroy:i,hide:n}}},function(t,e,n){"use strict";var r=n(2)["default"],i=n(34),o=n(69),s=function(t,e,n){this.wrapper=t,this.mediator=e,this.el=n,i.isUndefined(this.el)&&(this._ensureElement(),this.wrapper.insertBefore(this.el,this.wrapper.firstChild)),o.hide(this.el),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};r(s.prototype,n(235),n(268),n(236),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var t=document.createElement("ul"),e=document.createElement("p");e.innerHTML=i18n.t("errors:title"),this.el.appendChild(e).appendChild(t),this.list=t},render:function(){return 0===this.errors.length?!1:(this.errors.forEach(this.createErrorItem,this),void o.show(this.el))},createErrorItem:function(t){var e=document.createElement("li");e.classList.add("st-errors__msg"),e.innerHTML=t.text,this.list.appendChild(e)},addMessage:function(t){this.errors.push(t)},reset:function(){return 0===this.errors.length?!1:(this.errors=[],this.list.innerHTML="",void o.hide(this.el))}}),t.exports=s},function(t,e,n){"use strict";var r=n(34),i=n(29);t.exports=function(t,e){function o(t,e,n){return r.isUndefined(n)&&(n=""),"**"+e.replace(/<(.)?br(.)?>/g,"")+"**"+n}function s(t,e,n){return r.isUndefined(n)&&(n=""),"_"+e.replace(/<(.)?br(.)?>/g,"")+"_"+n}var a=n(242);e=i.classify(e);var u=t;u=u.replace(/&nbsp;/g," "),u=u.replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var c,l,f=["style","script","applet","embed","noframes","noscript"];for(l=0;l<f.length;l++)c=new RegExp("<"+f[l]+".*?"+f[l]+"(.*?)>","gi"),u=u.replace(c,"");u=u.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var h=["em","i","strong","b"];for(l=0;l<h.length;l++)c=new RegExp("<"+h[l]+"><br></"+h[l]+">","gi"),u=u.replace(c,"<br>");u=u.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(t,e,n){return"["+n.trim().replace(/<(.)?br(.)?>/g,"")+"]("+e+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,o).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,o).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,s).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,s),u=u.replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">");var p;return a.hasOwnProperty(e)&&(p=a[e],!r.isUndefined(p.prototype.toMarkdown)&&r.isFunction(p.prototype.toMarkdown)&&(u=p.prototype.toMarkdown(u))),u=u.replace(/<\/?[^>]+(>|$)/g,"")}},17]))}),function(){SirTrevor.setDefaults({iconUrl:document.body.getAttribute("icon-url")}),new SirTrevor.Editor({el:document.querySelector(".js-sir-trevor-instance"),blockTypes:["Text","List","Video","Quote","Iframe"],defaultType:["Text"]})}();